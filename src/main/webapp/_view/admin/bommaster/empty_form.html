<form onsubmit="return false;" id="BomMaster_Form" action="#(action)" method="post">
    #if(bomMaster.iAutoId??)
    <input type="hidden" name="bomMaster.iAutoId" value="#(bomMaster.iAutoId??)" />
    #end
    <table class="jbolt_table thead_font_normal table-center" data-width="1200px" data-height="300px"
           data-jbolttable>
        <thead>
        <tr>
            <th data-width="200" data-column="version">机型</th>
            <th data-width="150" data-column="version">文件名称</th>
            <th data-width="120" data-column="publish_time">文件名称</th>
            <th data-width="100" data-column="create_time">版本/版次</th>
            <th data-width="120" data-column="version">启用日期</th>
            <th data-width="120" data-column="version">停用日期</th>
        </thead>
        <tbody>
        <tr>
            <td>

            </td>
            <td>
                <input type="text" autocomplete="off"  class="form-control"  placeholder="输入文件名称" name="keywords" value="" />
            </td>
            <td>
                <input type="text" autocomplete="off"  class="form-control"  placeholder="输入文件名称" name="keywords" value="" />
            </td>
            <td>
                <input type="text" autocomplete="off"  class="form-control"  placeholder="输入版本/版次" name="keywords" value="" />
            </td>
            <td>
                <input type="text" class="form-control" id="startTime_demo" data-rule="required"  data-date name="startDate" value="#date(DateUtil.toDate(startDate??),'yyyy-MM-dd')">
            </td>
            <td>
                <input type="text" class="form-control" id="endTime_demo" data-rule="required;>=#startTime_demo" data-done-handler="checkme" data-date name="endDate" value="#date(DateUtil.toDate(endDate??),'yyyy-MM-dd')">
            </td>
        </tr>
        </tbody>
    </table>

    <div style="margin-top: 50px;">
        <div style="float: left; width: 150px; margin-bottom: 20px">
            <img src="assets/img/defaultposter.jpg" data-target="parent" data-photobtn class="m-1" style="height: 100px" tooltip data-title="点击查看大图" />
        </div>
        <div style="float: left; margin-left: 5px">
            <table class="jbolt_table thead_font_normal table-center thead_font_normal" data-width="auto" height="100px" data-height="300px"
                   data-jbolttable>
                <thead>
                <tr>
                    <th  data-width="50" data-column="version">NO</th>
                    <th  data-width="150" data-column="version">存货编码</th>
                    <th  data-width="120" data-column="publish_time">客户部番</th>
                    <th  data-width="100" data-column="create_time">重量（KG）</th>
                    <th  data-width="120" data-column="version">设变号</th>
                    <th  data-width="120" data-column="version">设变日期</th>
                    <th  data-width="50" data-column="version">NO</th>
                    <th  data-width="120" data-column="create_time">UG部番</th>
                    <th  data-width="100" data-column="create_time">重量（KG）</th>
                    <th  data-width="120" data-column="version">设变号</th>
                    <th  data-width="120" data-column="version">设变日期</th>
                </thead>
                <tbody>
                <tr>
                    <td>01</td>
                    <td>
                        <input type="text" hidden data-sync-attr="itemid" id="iBeforeInveId"  data-notnull="true" data-tips="请输入转换前存货ID"  data-with-clearbtn="true" autocomplete="off"  class="form-control" placeholder="请输入转换前存货ID" maxlength="40" />
                        <input type="text"
                               data-autocomplete
                               data-notnull="true"
                               data-tips="请选择存货编码"
                               autocomplete="off"
                               class="form-control"
                               placeholder="请选择存货编码"
                               maxlength="40"
                               data-url="admin/bommaster/inventoryAutocomplete"
                               data-sync-ele="#beforeInvCode,#Weight,#iBeforeInveId"
                               data-text-attr="cinvcode"
                               data-column-attr="cinvcode"
                        />
                    </td>
                    <td>
                        <input id="beforeInvCode" type="text"    data-notnull="true" data-sync-attr="cinvcode1"   data-with-clearbtn="true" autocomplete="off"  class="form-control" disabled/>
                    </td>
                    <td>
                        <input id="Weight" type="text"   value="" data-notnull="true" data-sync-attr="iweight"   data-with-clearbtn="true" autocomplete="off"  class="form-control" disabled/>
                    </td>
                    <td>
                        <input type="text" autocomplete="off"  class="form-control"  placeholder="输入设变号" name="keywords" value="" />
                    </td>
                    <td>
                        <input type="text" class="form-control"  data-date name="startDate" value="#date(DateUtil.toDate(startDate??),'yyyy-MM-dd')">
                    </td>
                    <td>01</td>
                    <td></td>
                    <td></td>
                    <td>
                        <input type="text" autocomplete="off"  class="form-control"  placeholder="输入设变号" name="keywords" value="" />
                    </td>
                    <td>
                        <input type="text" class="form-control"  data-date name="startDate" value="#date(DateUtil.toDate(startDate??),'yyyy-MM-dd')">
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="form-group row" style="clear: both;margin-top: 30px;">
        <label class="col-2 col-form-label" style="margin-left: -200px">客户名称：</label>
        <div class="col-2">
            <input type="text" autocomplete="off" class="form-control" data-tips="请输入客户名称" maxlength="40" name="appversion.appcode" value="#(appversion.appcode??)">
        </div>
        <label class="col-2 col-form-label">备注共用件：</label>
        <div class="col-2">
            <input type="text" autocomplete="off" class="form-control" data-tips="请输入客户名称" maxlength="40" name="appversion.appcode" value="#(appversion.appcode??)">
        </div>
    </div>


</form>
<script type="text/template" id="bomMaster_demotpl_#(pageId)">
    {@each datas as data,index}
    <tr data-id="${data.id}">
        <td>
          <input autocomplete="off" class="form-control" data-maxsize="2">
        </td>
        <td>
            <input  autocomplete="off" class="form-control" data-maxsize="5">
        </td>
        <td>
            <input  autocomplete="off" class="form-control">
        </td>
        <td>
            <input  autocomplete="off" class="form-control">
        </td>
        <td>
            <input  autocomplete="off" class="form-control">
        </td>
        <td>
            <input  autocomplete="off" class="form-control">
        </td>
        <td>
            <input type="text" hidden data-sync-attr="itemid" id="iBeforeInventoryId${data.index}"  data-notnull="true" data-with-clearbtn="true" autocomplete="off"  class="form-control" maxlength="40"/>
            <input type="text"
                   id="invItemId${data.index}"
                   data-rule="required"
                   data-autocomplete
                   data-notnull="true"
                   data-tips="请选择存货编码"
                   data-with-clearbtn="true"
                   autocomplete="off"
                   class="form-control"
                   placeholder="请选择存货编码"
                   maxlength="40"
                   data-url="admin/bommaster/inventoryAutocomplete"
                   data-sync-ele="#cInvCode${data.index},#iWeight${data.index},#iBeforeInventoryId${data.index},#cInvName${data.index},#cInvAddName${data.index},#cInvAddCode${data.index},#InvName${data.index}"
                   data-text-attr="cinvcode"
                   data-column-attr="cinvcode"
            />
            <div style="margin-top: 10px"></div>
            <input id="cInvName${data.index}" type="text"   value="" data-notnull="true" data-sync-attr="cinvname"   data-with-clearbtn="true" autocomplete="off"  class="form-control" readonly/>
        </td>
        <td>
            <input id="cInvCode${data.index}" type="text"   value="" data-notnull="true" data-sync-attr="cinvcode1"   data-with-clearbtn="true" autocomplete="off"  class="form-control" readonly/>
            <div style="margin-top: 10px"></div>
            <input id="cInvAddName${data.index}" type="text"   value="" data-notnull="true" data-sync-attr="cinvname1"   data-with-clearbtn="true" autocomplete="off"  class="form-control" readonly/>
        </td>
        <td>
            <input id="cInvAddCode${data.index}" type="text"   value="" data-notnull="true" data-sync-attr="cinvaddcode1"   data-with-clearbtn="true" autocomplete="off"  class="form-control" readonly/>
            <div style="margin-top: 10px"></div>
            <input id="InvName${data.index}" type="text"   value="" data-notnull="true" data-sync-attr="cinvname2"   data-with-clearbtn="true" autocomplete="off"  class="form-control" readonly/>
        </td>
        <td>

        </td>
        <td>
            <input type="text" autocomplete="off"  class="form-control" data-rule="number"  maxlength="10">
            <div style="margin-top: 10px"></div>
            <input id="iWeight${data.index}" type="text"   value="" data-notnull="true" data-sync-attr="iweight"   data-with-clearbtn="true" autocomplete="off"  class="form-control" readonly/>
        </td>
        <td>
            <input type="text" autocomplete="off"  class="form-control" disabled>
            <div style="margin-top: 10px"></div>
            <input type="text" autocomplete="off"  class="form-control" disabled>
        </td>
        <td>

        </td>
        <td>
            <input type="text" hidden data-sync-attr="itemid" id="originalInvId${data.index}"  data-notnull="true"  data-with-clearbtn="true" autocomplete="off"  class="form-control" maxlength="40"/>
            <input type="text" id="originalItemId${data.index}"
                   data-rule="required"
                   data-autocomplete
                   data-notnull="true"
                   data-tips="请选择存货编码"
                   data-with-clearbtn="true"
                   autocomplete="off"
                   class="form-control"
                   placeholder="请选择存货编码"
                   maxlength="40"
                   data-url="admin/bommaster/inventoryAutocomplete"
                   data-sync-ele="#originalInvId${data.index},#originalInvName${data.index},#originalInvStd${data.index}"
                   data-text-attr="cinvcode"
                   data-column-attr="cinvcode"
            />
            <div style="margin-top: 10px"></div>
            <input id="originalInvName${data.index}" type="text"   value="" data-notnull="true" data-sync-attr="cinvname"   data-with-clearbtn="true" autocomplete="off"  class="form-control" readonly/>
        </td>
        <td>
            <input id="originalInvSup${data.index}" type="text"   value="" data-notnull="true"   data-with-clearbtn="true" autocomplete="off"  class="form-control" readonly/>
            <div style="margin-top: 10px"></div>
            <input id="originalInvStd${data.index}" type="text"   value="" data-notnull="true" data-sync-attr="cinvstd"   data-with-clearbtn="true" autocomplete="off"  class="form-control" readonly/>
        </td>
        <td>
            <input type="text" autocomplete="off"  class="form-control" data-rule="number" maxlength="10" >
            <div style="margin-top: 10px"></div>
            <input type="text" autocomplete="off"  class="form-control" data-rule="number" maxlength="10" >
        </td>
        <td>
            <input type="text" hidden data-sync-attr="itemid" id="slicingInvId${data.index}"  data-notnull="true"  data-with-clearbtn="true" autocomplete="off"  class="form-control"  maxlength="40" />
            <input type="text"
                   id="slicingItemId${data.index}"
                   data-autocomplete
                   data-notnull="true"
                   data-tips="请选择存货编码"
                   data-with-clearbtn="true"
                   autocomplete="off"
                   class="form-control"
                   placeholder="请选择存货编码"
                   maxlength="40"
                   data-url="admin/bommaster/inventoryAutocomplete"
                   data-sync-ele="#slicingInvId${data.index},#slicingInvName${data.index},#slicingInvStd${data.index}"
                   data-text-attr="cinvcode"
                   data-column-attr="cinvcode"
            />
            <div style="margin-top: 10px"></div>

            <input id="slicingInvName${data.index}" type="text"   value="" data-notnull="true" data-sync-attr="cinvname"   data-with-clearbtn="true" autocomplete="off"  class="form-control" readonly/>
        </td>
        <td>
            <input id="slicingInvSup${data.index}" type="text"   value="" data-notnull="true"   data-with-clearbtn="true" autocomplete="off"  class="form-control" readonly/>
            <div style="margin-top: 10px"></div>

            <input id="slicingInvStd${data.index}" type="text"   value="" data-notnull="true" data-sync-attr="cinvstd"   data-with-clearbtn="true" autocomplete="off"  class="form-control" readonly/>
        </td>
        <td>
            <input type="text" autocomplete="off"  class="form-control" data-rule="number"  maxlength="10" name="number1" value="#(number1??)">
            <div style="margin-top: 10px"></div>
            <input type="text" autocomplete="off"  class="form-control" data-rule="number"  maxlength="10">
        </td>
        <td>
            <input type="text" hidden data-sync-attr="itemid" id="blankingInvId${data.index}"  data-notnull="true" data-with-clearbtn="true" autocomplete="off"  class="form-control"  maxlength="40"/>
            <input type="text"
                   id="blankingItemId${data.index}"
                   data-rule="required"
                   data-autocomplete
                   data-notnull="true"
                   data-tips="请选择存货编码"
                   data-with-clearbtn="true"
                   autocomplete="off"
                   class="form-control"
                   placeholder="请选择存货编码"
                   maxlength="40"
                   data-url="admin/bommaster/inventoryAutocomplete"
                   data-sync-ele="#blankingInvId${data.index},#blankingInvName${data.index},#blankingStd${data.index},#blankingInvName${data.index}"
                   data-text-attr="cinvcode"
                   data-column-attr="cinvcode"
            />
            <div style="margin-top: 10px"></div>
            <input id="blankingInvName${data.index}" type="text"   value="" data-notnull="true" data-sync-attr="cinvname"  autocomplete="off"  class="form-control" disabled/>
        </td>
        <td>
            <input id="blankingSup${data.index}" type="text"   value="" data-notnull="true"   data-with-clearbtn="true" autocomplete="off"  class="form-control" disabled/>
            <div style="margin-top: 10px"></div>
            <input id="blankingStd${data.index}" type="text"   value="" data-notnull="true" data-sync-attr="cinvstd"   data-with-clearbtn="true" autocomplete="off"  class="form-control" disabled/>
        </td>
        <td>
            <input type="text" autocomplete="off"  class="form-control" data-rule="number"  maxlength="10"/>
            <div style="margin-top: 10px"></div>
            <input type="text" autocomplete="off"  class="form-control" data-rule="number"  maxlength="10"/>
        </td>
        <td>
            <input type="text" autocomplete="off"  class="form-control" >
        </td>
        <td>
            <input type="text" autocomplete="off"  class="form-control" >
        </td>
        <td>
            <input type="text" autocomplete="off"  class="form-control" >
        </td>
        <td>
            <a tabindex="-1"  href="javascript:void(0)" tooltip data-title="插入一行"  onclick="jboltTableInsertEmptyRow(this)"><i class="fa fa-plus"></i></a>
            <a tabindex="-1" class="ml-1" href="javascript:void(0)" tooltip data-title="移除此行" onclick="jboltTableRemoveRow(this)" ><i class="fa fa-trash"></i></a>
            <a tooltip data-title="上移"  href="javascript:void(0)" onclick="jboltTableTrMoveUp(this)"   class="jbolt_table_btn"><i class="fa fa-arrow-up c-info"></i></a>
            <a tooltip data-title="下移"  href="javascript:void(0)" onclick="jboltTableTrMoveDown(this)"  class="jbolt_table_btn"><i class="fa fa-arrow-down c-info"></i></a>
        </td>
    </tr>
    {@/each}
</script>

<div class="jbolt_table_toolbar" id="bomMaster_toolbar_#(pageId)">
    <div class="btn-group btn-group-sm" role="group" aria-label="btn-group">
        <button onclick="testJboltTableInsertRow(this)" class="btn btn-primary btn-sm" ><i class="fa fa-plus"></i> 新增</button>
        <button onclick="jboltTableRemoveCheckedRow(this,true,false)" class="btn btn-danger btn-sm"><i class="fa fa-trash"></i> 删除</button>
        <button onclick="jboltTableRefresh(this,'刷新会丢失新添加未保存的数据，确认刷新吗？')" class="btn btn-success btn-sm"><i class="fa fa-refresh"></i> 刷新</button>
        <button onclick="jboltTableMaximize(this)" class="btn btn-info btn-sm"><i class="fa fa-window-maximize"></i> 最大化</button>
    </div>
    <div class="btn-group btn-group-sm" role="group" aria-label="btn-group">
        <button onclick="insertPrependEmptyRow(this)" class="btn btn-primary btn-sm" ><i class="fa fa-arrow-up"></i> 首插空</button>
        <button onclick="insertEmptyRowBeforeChecked(this)" class="btn btn-primary btn-sm" ><i class="fa fa-arrow-left"></i> 前插空</button>
        <button onclick="insertEmptyRowAfterChecked(this)" class="btn btn-primary btn-sm" >后插空 <i class="fa fa-arrow-right"></i></button>
        <button onclick="insertAppendEmptyRow(this)" class="btn btn-primary btn-sm" >尾插空 <i class="fa fa-arrow-down"></i></button>
    </div>
</div>
<table class="jbolt_table jbolt_main_table table-center thead_font_normal"
       data-jbolttable
       data-width="auto"
       data-height="fill"
       data-column-resize="true"
       data-column-prepend="1:checkbox"
       data-toolbar="bomMaster_toolbar_#(pageId)"
       data-editable="true"
       data-tfoot-fixed="true"
       id="bomMaster_#(pageId)"
       data-rowtpl="bomMaster_demotpl_#(pageId)"
       data-editable-option="getEditableTableOptions_#(pageId)"
>
    <thead>
    <tr>
        <th  colspan="6" data-width="420" data-column="code">编号</th>
        <th  rowspan="1" data-width="150" data-column="id">存货编码</th>
        <th  rowspan="1" data-width="150" data-column="invCode1">客户部番</th>
        <th  rowspan="1" data-width="150" data-column="invCode2">UG部番</th>
        <th  rowspan="2" data-width="150" data-column="img">略图</th>
        <th  rowspan="1" data-width="120" data-column="qty">QTY</th>
        <th  rowspan="1" data-width="150" data-column="invCode1">材质</th>
        <th  rowspan="2" data-width="150" data-column="invCode1">材料类别</th>
        <th  rowspan="1" data-width="150" data-column="invCode1">原材料存货编码</th>
        <th  rowspan="1" data-width="150" data-column="invCode1">原材料供应商</th>
        <th  rowspan="1" data-width="120" data-column="invCode1">可制件数</th>
        <th  rowspan="1" data-width="150" data-column="invCode1">分条存货编码</th>
        <th  rowspan="1" data-width="150" data-column="invCode1">分条商</th>
        <th  rowspan="1" data-width="120" data-column="invCode1">可制件数</th>
        <th  rowspan="1" data-width="150" data-column="invCode1">落料存货编码</th>
        <th  rowspan="1" data-width="150" data-column="invCode1">落料商</th>
        <th  rowspan="1" data-width="120" data-column="invCode1">可制件数</th>
        <th  rowspan="2" data-width="150" data-column="invCode1">部品加工商</th>
        <th  rowspan="2" data-width="120" data-column="invCode1">是否外作</th>
        <th  rowspan="2" data-width="120" data-column="invCode1">备注</th>
        <th  rowspan="2" data-width="150" data-column="invCode1">操作</th>
    </tr>
    <tr>
        <th data-width="70" data-column="code1">1</th>
        <th data-width="80" data-column="code2">2</th>
        <th data-column="code3">3</th>
        <th data-column="code4">4</th>
        <th data-column="code5">5</th>
        <th data-column="code6">6</th>
        <th rowspan="1" data-width="150">存货名称</th>
        <th rowspan="1" data-width="150">部品名称</th>
        <th rowspan="1" data-width="150">UG部品名称</th>
        <th rowspan="1" data-width="120">重量</th>
        <th rowspan="1" data-width="120">厚度</th>
        <th rowspan="1" data-width="150">原材料存货名称</th>
        <th rowspan="1" data-width="150">原材料规格</th>
        <th rowspan="1" data-width="120">重量</th>
        <th rowspan="1" data-width="150">分条存货名称</th>
        <th rowspan="1" data-width="150">分条规格</th>
        <th rowspan="1" data-width="120">重量</th>
        <th rowspan="1" data-width="150">落料存货名称</th>
        <th rowspan="1" data-width="150">下料尺寸</th>
        <th rowspan="1" data-width="120">重量</th>
    </tr>

    </thead>
    <tbody>

    </tbody>
</table>
#define js()
<script>
    var index = 0;
    function getEditableTableOptions_#(pageId)(){
        var editableTableOptions={
            trigger:"click",
            //初始行数
            initRowCount:0,

            //限制最大数 默认30
            submit:{
               // withForm:["","orderFootboxForm_#(pageId)"],
                type:"all",//cell|all
                //params:{"orderId":3},//携带其他额外参数
                //commonAttr:{"save":{"update_time":new Date().getTime(),"autoId":1}},//给save或者update的时候 表格每一行数据 都添加指定的属性一并提交
                url:"demo/demotable/submit",
                success:function(res){
                    LayerMsgBox.success("提交成功",600,function(){
                        refreshPjaxContainer();
                    });
                }
            },
            //插入数据时默认属性值
            //insertDefaultValues:{age:10,briefInfo:"xxxxx"},
            cols:{
                id:{
                    submitAttr:"id",
                },
                index:{
                    submitAttr: "index"
                }
            }
        };
        return editableTableOptions;
    }
    function testJboltTableInsertRow(ele,forceTrChange) {
        var table=getJBoltTable(ele);
        index+=1;
        if(isOk(table)){
            var jboltTable=table.jboltTable("inst");
            if(jboltTable){
                var action=getRealJqueryObject(ele),tr;
                if(isOk(action)){
                    var success = checkMasterTableId(action);
                    if(!success){
                        return false;
                    }
                    //如果是在表格里触发的
                    if(isOk(action.closest("table[data-jbolttable]"))){
                        tr = action.closest("tr");
                    }else if(isOk(action.closest(".jbolt_table_fixed"))){
                        var fixtr = action.closest("tr");
                        var fixTrIndex = fixtr.index();
                        tr=jboltTable.tbody.find("tr:nth-child("+(fixTrIndex+1)+")");
                    }
                }
                ;
                return insertRows(jboltTable,tr,{index: index},true,forceTrChange);
            }
        }
    }

    function insertPrependEmptyRow(ele,forceTrChange){
        index+=1;
        var table=getJBoltTable(ele);
        if(isOk(table)){
            var jboltTable=table.jboltTable("inst");
            if(jboltTable){
                var action=getRealJqueryObject(ele);
                if(isOk(action)){
                    var success = checkMasterTableId(action);
                    if(!success){
                        return false;
                    }
                }
                if(!jboltTable.isEmpty){
                    var tr=jboltTable.tbody.find("tr:first");
                    if(isOk(tr)){
                        return insertRows(jboltTable,tr,{index: index},true,forceTrChange);
                    }
                }
                return insertRows(jboltTable,null,null,false,forceTrChange);
            }
        }
        LayerMsgBox.alert("表格组件配置异常",2);
        return false;
    }

    function insertEmptyRowBeforeChecked(ele,forceTrChange){
        index+=1;
        var table=getJBoltTable(ele);
        if(isOk(table)){
            var jboltTable=table.jboltTable("inst");
            if(jboltTable){
                var tr=jboltTable.me.getCheckedTr(jboltTable);
                if(isOk(tr)){
                    var action=getRealJqueryObject(ele);
                    if(isOk(action)){
                        var success = checkMasterTableId(action);
                        if(!success){
                            return false;
                        }
                    }
                    return insertRows(jboltTable,tr,{index: index},true,forceTrChange);
                }
                return false;
            }
        }
        LayerMsgBox.alert("表格组件配置异常",2);
        return false;
    }

    function insertEmptyRowAfterChecked(ele,forceTrChange){
        index+=1;
        var table=getJBoltTable(ele);
        if(isOk(table)){
            var jboltTable=table.jboltTable("inst");
            if(jboltTable){
                var tr=jboltTable.me.getCheckedTr(jboltTable);
                if(isOk(tr)){
                    var action=getRealJqueryObject(ele);
                    if(isOk(action)){
                        var success = checkMasterTableId(action);
                        if(!success){
                            return false;
                        }
                    }
                    return insertRows(jboltTable,tr,{index: index},false,forceTrChange);
                }
                return false;
            }
        }
        LayerMsgBox.alert("表格组件配置异常",2);
        return false;
    }

    function insertAppendEmptyRow(ele,forceTrChange){
        var table=getJBoltTable(ele);
        if(isOk(table)){
            var jboltTable=table.jboltTable("inst");
            if(jboltTable){
                var action=getRealJqueryObject(ele);
                if(isOk(action)){
                    var success = checkMasterTableId(action);
                    if(!success){
                        return false;
                    }
                }
                if(!jboltTable.isEmpty){
                    var tr=jboltTable.tbody.find("tr:last");
                    if(isOk(tr)){
                        return insertRows(jboltTable,tr,{index: index},false,forceTrChange);
                    }
                }
                return insertRows(jboltTable,null,{index: index},false,forceTrChange);
            }
        }
        LayerMsgBox.alert("表格组件配置异常",2);
        return false;
    }

    function insertRows(table,tr,insertEmptyData,insertToBefore,forceTrChange){
        var canInsertTr=table.me.checkCanInsertNewTr(table,1);
        if(canInsertTr){
            //处理thead里的checkbox uncheck
            table.me.processUnCheckTheadCheckbox(table);

            var insertDefaultValues=table.editableOptions.insertDefaultValues;
            if(insertDefaultValues){
                insertEmptyData=table.me.deepClone(insertDefaultValues);
            }
            var tempTr=table.me.insertRowData(table,tr,insertEmptyData,false,insertToBefore);
            if(isOk(tempTr)){
                table.me.processTableIndexColumn(table);
                table.me.processInsertRowTableListData(table,tempTr,insertEmptyData,insertToBefore);
                table.me.initEditableHSummarys(table,tempTr);
                table.me.processTfootSummarys(table);
                //处理change状态
                table.me.processNewInsertTrEditableTdsChanged(table,tempTr,insertEmptyData,forceTrChange);
                //处理新插入的行重新设置宽度
                table.me.resizeTrByOldWidth(table,tempTr);
                //处理动态插入数据后的handler
                table.me.processEditableTableAfterInsertRowHandler(table,tempTr);
            }
            return tempTr;
        }
        return false;
    }


</script>
#include("/_view/_admin/common/_formjs.html",formId="BomMaster_Form")
#end
