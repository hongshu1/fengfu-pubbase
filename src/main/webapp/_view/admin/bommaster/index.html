#@jboltLayout()
#define main()
#set(pageId=RandomUtil.random(6))
<div class="jbolt_page_content">
	#setLocal(jboltTabId=(goods.id?? RandomUtil.random(6)))
	<nav>
		<div class="nav nav-tabs" id="nav-tab_#(jboltTabId)" role="tablist">
			<a class="nav-item nav-link active" id="nav-base-tab_one" data-toggle="tab" href="#tab-one" role="tab" onclick="refreshPjaxContainer()" aria-controls="tab-one" aria-selected="true">物料清单</a>
			<a class="nav-item nav-link" id="nav-base-tab_two" data-toggle="tab" href="#tab-two" role="tab" onclick="refreshJBoltTable()" aria-controls="tab-two" aria-selected="false">版本记录</a>
		</div>
	</nav>
	<div class="tab-content" style="padding: 0px 1rem">
			<!--1 物料清单 -->
			<div class="tab-pane fade show active" id="tab-one" role="tabpanel" aria-labelledby="nav-base-tab_one">
				#render("bommaster_index.html")
			</div>
			<!--2 版本记录 -->
			<div class="tab-pane fade" id="tab-two" role="tabpanel" aria-labelledby="nav-base-tab_two">
				#ajaxPortal("/admin/bommaster/versionIndex","bommaster_jstree_#(pageId)",true)
			</div>
		</div>
</div>
#end

#define js()
<script type="text/javascript">

	initTreehandler('');

	function bommaster_jstree(tree, data){
		$("#bomCompare_pid").val(data.id);
		$("#bomCompare_submit").click();
	}
	function initTreehandler(item) {
		var treeHtmlStr ="<div " +
				"					data-jstree" +
				"                     data-open-level='-1'" +
				"					  data-curd='false' " +
				"                     data-async='true'" +
				"                     data-search-input='searchBackGoodsTypeInput_2'" +
				"                     data-change-handler='bommaster_jstree'" +
				"                     data-conditions-form='bomMaster_1_'" +
				"                     data-read-url='admin/bommaster/getDatas?item='+item>";

		$("#bommasterBackCategoryTree").html(treeHtmlStr);
		JSTreeUtil.init($("#bommasterBackCategoryTree"));
	}

	function keyWordsOnChange() {
		var item = $("#searchBackGoodsTypeInput_2").val()
		initTreehandler(item);
	}
</script>
#end
