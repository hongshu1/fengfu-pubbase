#set(pageId=RandomUtil.random(6))
<div class="jbolt_page_title">
    <div class="row">

        <div class="col-12 form-inline">

        </div>

    </div>
</div>

<div class="jbolt_page_content">

    <form onsubmit="return false;" id="CurrentStockForm_#(pageId)" action="#(action)" method="post">
<!--
        <input type="hidden" name="billdid" value="#(bill.billdid??)" />
-->

        <div class="form-group row">
            <label class="col-1 col-form-label">送货单号</label>
            <div class="col-2">
                <input type="text" data-with-clearbtn="true" autocomplete="off" class="form-control"
                         maxlength="100"  readonly
                       value="#(bill.billno??)"/>

            </div>
            <label class="col-1 col-form-label">送货日期</label>
            <div class="col-2">
                <input type="text" data-with-clearbtn="true" autocomplete="off" class="form-control"
                       maxlength="100"  readonly
                       value="#datetime(bill.billdate??,'yyyy-MM-dd')"/>

            </div>

        </div>

        <div class="form-group row">
            <label class="col-1 col-form-label">供应商名称</label>
            <div class="col-2">
                <input type="text" data-with-clearbtn="true" autocomplete="off" class="form-control"
                         maxlength="100"  readonly
                       value="#(bill.venname??)"/>

            </div>

            <label class="col-1 col-form-label">备注</label>
            <div class="col-2">
                <input type="text" data-with-clearbtn="true" autocomplete="off" class="form-control"
                         maxlength="50" readonly
                       value="#(bill.createperson??)"/>
            </div>
        </div>
    </form>
</div>

<div class="jbolt_page_content">

    <!-- JBoltTable的数据模板定义-->
    <textarea class="jb_tpl_box" id="fhRowtpl_#(pageId)">
		{@each datas as data,index}
        <tr data-id="${data.autoid}">
            <td>${pageNumber,pageSize,index | rownum}</td>
              <td>
                $${data.barcode,|qrcode}
            </td>
			<td>${data.billno}</td>
			<td>${data.shno}</td>
			<td>${data.sourcebillrowno}</td>
			<td>${data.invcode}</td>
			<td>${data.invname}</td>

			<td>${data.invstd}</td>
			<td>${data.unitname}</td>
			<td>${data.cuscode}</td>
			<td>${data.cuscode}</td>
			<td>${data.bcqty, 2|number_format}</td>
			<!--<td>${data.cuscode}</td>-->
			<td>${data.vinqty, 2|number_format}</td>
			<td>${data.whname}</td>
			<td>${data.iposcode}</td>
		</tr>
		{@/each}
	</textarea>


    <table class="jbolt_table jbolt_main_table table-center"
           id="jbolt_table_#(pageId)"
           data-jbolttable
           data-height="700"
           data-ajax="true"
           data-width="auto"
           data-url="admin/currentstock/editFormDatas_WW?billno=#(bill.billno??)"
           data-column-resize="true"
           data-column-prepend="1:checkbox:true"
           data-conditions-form="CurrentStockForm_#(pageId)"
           data-rowtpl="fhRowtpl_#(pageId)"
           data-toolbar="fh_toolbar_#(pageId)"
          data-page="PuInsStoreDetailPage_#(pageId)"
    ###data-fixed-columns-left="1,2,3"
    >
        <thead class="thead-blue">
        <tr>
            <th data-width="30" data-min-width="60" data-column="index">序号</th>
            <th data-width="150" data-column="">条码</th>

            <th data-width="150" data-column="billno">委外发料单号</th>
            <th data-width="150" data-column="shno">委外收货单</th>
            <th data-width="150" data-column="sourcebillrowno">委外工单行号</th>
            <th data-width="150" data-column="invcode">料号</th>
            <th data-width="150" data-column="invname">品名</th>

            <th data-width="150" data-column="invstd">规格</th>
            <th data-width="150" data-column="unitname">生产单位</th>
            <th data-width="150" data-column="">收容数量</th>
            <th data-width="150" data-column="">计划数量</th>

            <th data-width="150" data-column="bcqty">送货数量</th>
            <th data-width="150" data-column="vinqty">实收数量</th>
<!--
            <th data-width="150" data-column="">差异数量</th>
-->
            <th data-width="150" data-column="whname">入库仓库</th>
            <th data-width="150" data-column="iposcode">入库库位</th>
        </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
</div>
#define js()
<script>
    function submitThisForm() {
        jboltTableSubmit('#jbolt_table_#(pageId)');
    }
</script>
#end

