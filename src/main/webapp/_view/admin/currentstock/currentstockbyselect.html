#@jboltLayout()
#define main()
#set(pageId=RandomUtil.random(6))
<div class="jbolt_page" data-key="#(pmkey)" >

<div class="jbolt_page_title">
	<div class="row">
	<div class="col-md-auto">
	</div>
	<div class="col">
		<form class="form-inline" id="parameterForm_#(pageId)"   onsubmit="return false;" method="post">
			<input type="text" autocomplete="off"  class="form-control"  placeholder="库位编码" name="poscode" value="" />
			<input type="text" autocomplete="off"  class="form-control"  placeholder="库位名称" name="posname" value="" />
			<input type="text" autocomplete="off"  class="form-control"  placeholder="存货编码" name="invcode" value="" />
			<input type="text" autocomplete="off"  class="form-control"  placeholder="存货名称" name="invname" value="" />

			<button  type="submit" class="btn btn-outline-secondary" ><i class="fa fa-search"></i> 查询</button>
		<button type="reset"  class="btn btn-outline-secondary"><i class="fa fa-reset"></i> 重置</button>
		</form>
	</div>
	<div class="col-md-auto">
	</div>
	</div>
</div>
<div class="jbolt_page_content">
<!-- JBoltTable的数据模板定义-->
<textarea class="jb_tpl_box" id="parameterRowtpl_#(pageId)">
{@each datas as data,index}
<tr data-id="${data.id}" >
<td>${pageNumber,pageSize,index | rownum}</td>
<td>${data.poscode}</td>
<td>${data.posname}</td>
<td>${data.whcode}</td>
<td>${data.whname}</td>
<td>${data.invcode}</td>
<td>${data.invname}</td>
<td>${data.qty}</td>
<td>${data.num}</td>
</tr>
{@/each}
</textarea>

<table class="jbolt_table jbolt_main_table table-center hover_info"
data-jbolttable
data-height="fill"
id="currentstock_table_#(pageId)"
data-ajax="true"
data-url="admin/currentstock/CurrentStockByDatas?whcode=#(whcode)"
data-column-resize="true"
data-row-click-active="true"
data-column-prepend="1:checkbox:true"
data-conditions-form="parameterForm_#(pageId)"
data-rowtpl="parameterRowtpl_#(pageId)"
data-page="parameterPage_#(pageId)"
data-toolbar="parameter_toolbar_#(pageId)"
data-row-dblclick-active="true"
data-row-dblclick-handler="jbolt_table_dblclickhandler_#(pageId)"
>
<thead>
<tr>
	<th data-width="60">序号</th>
	<th data-width="150"  data-column="poscode">库位编码</th>
	<th data-width="150"  data-column="posname">库位名称</th>
	<th data-width="150"  data-column="whcode">仓库编码</th>
	<th data-width="150"  data-column="whname">仓库名称</th>
	<th data-width="150" data-column="invcode">存货编码</th>
	<th data-width="150" data-column="invname">存货名称</th>
	<th data-width="150" data-column="qty">账面数量</th>
	<th data-width="150" data-column="num">账面件数</th>
</tr>
</thead>
<tbody>
</tbody>
</table>



</div>
</div>
#end

#define js()
<script type="text/javascript">
	var pdatas = parent.getJboltTableAllDatas("jbolt_table_position_split");
	console.log(pdatas)
	function submitThisForm(callback){
		var datas=getJboltTableCheckedDatas("currentstock_table_#(pageId)");
			parent.jboltTableInsertRow(parent.$("#jbolt_table_position_split"), datas, false, false, true);
			parent.layer.close(parent.layer.getFrameIndex(window.name));
			if(callback){
				callback();
			}
	}
</script>
#end
