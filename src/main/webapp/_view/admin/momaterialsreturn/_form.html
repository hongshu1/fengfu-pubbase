#set(pageId=RandomUtil.random(6))
<div class="jbolt_page">
    <div class="jbolt_table_toolbar" id="bomcompare_split_toolbar_#(pageId)">
        <div class="col-md-l pt-2" role="group" aria-label="btn-group">
            <!-- <button onclick="submitThisForm()"
                     data-id="1" data-value="" class="btn btn-success btn-sm"><i class="fa fa-refresh"></i>
                 保存
             </button>-->
            <button onclick="submitThisForms()" class="btn btn-success btn-sm" ><i
                    class="fa fa-refresh"></i> 保存
            </button>
            <button onclick="submitAllTables_#(pageId)(this)" #if(type=="0") style="display: none" #end
                    data-id="2" data-value="submit" type="submit" class="btn btn-info btn-sm"><i
                    class="fa fa-window-maximize"></i> 提交审核
            </button>

            <button onclick="closeHandler()" class="btn btn-info btn-sm"><i class="fa fa-window-maximize"></i>
                关闭
            </button>
        </div>
    </div>
    <div class="jbolt_page_content">
        <form onsubmit="return false;" id="moMaterialsreturnForm" action="#(action)" method="post">


            <input type="hidden"  name="moMaterialsreturnm.iautoid" value="#(moMaterialsreturnm.iautoid??)"/>
            <input type="hidden"  name="moMaterialsreturnm.imodocid" value="#(imodocid??)"/>





            <div class="form-group row">
                <div class="col-11" style="margin-left: 180px;">
                    <div class="jbolt_page_content">
                        #render("_table_split.html")
                    </div>
                </div>
            </div>
            <div class="form-group row">
                <label class="col-sm-2 col-form-label">备注：</label>
                <div class="col-sm-2 col-form-label">
                    </textarea>
                    <textarea id="memo" name="moMaterialsreturnm.cmemo" class="form-control" placeholder="=请输入备注="
                              type="text" maxlength="300"
                              value=""></textarea>
                </div>


            </div>

        </form>
    </div>
</div>
#define js()
<script>
    hideParentLayerDialogBtn();
    $(function(){

        init();

    });

    function submitThisForms() {
        console.log("提交表单");

        jboltTableSubmit("#jbolt_table_#(pageId)");
    }

    function  returnofmaterial(){

        $.ajax({
            url: "admin/momaterialscanusedlog/getmomaterialscanusedlogList",
            type: 'GET',
            success: function (ret) {
                if (ret.state === 'ok') {
                    var data = ret.data;
                    if(data.list) {

                        jboltTableClear('#jbolt_table_#(pageId)');

                        jboltTableInsertRow('#jbolt_table_#(pageId)', data.list, false, false, true);
                    }
                    // console.log(jboltTableGetSubmitData('#itemroutingconfigid_#(pageId)'));
                }
            },
            error: function () {
                LayerMsgBox.alert("系统异常,请联系管理员");
            }
        });
    }

    function  init(){

        $.ajax({
            url: "admin/momaterialsreturn/getMoMaterialsreturnList",
            type: 'GET',
            success: function (ret) {
                if (ret.state === 'ok') {
                    var data = ret.data;

                    jboltTableClear('#jbolt_table_#(pageId)');

                    jboltTableInsertRow('#jbolt_table_#(pageId)', data, false, false, true);
                    // console.log(jboltTableGetSubmitData('#itemroutingconfigid_#(pageId)'));
                }
            },
            error: function () {
                LayerMsgBox.alert("系统异常,请联系管理员");
            }
        });
    }

    function getEditableTableOptions_split_#(pageId)(){
        var editableTableOptions={
            //初始行数
            // initRowCount:10,
            //限制最大数 默认30
            maxRowCount:1000,
            trigger:"click",
            submit:{
                withForm: ["moMaterialsreturnForm"],
                type:"all",//cell|all|multi
                //name:"table2"
                url: "/admin/purchaseReceiptList/submitAll", success: function (res) {
                    LayerMsgBox.success("提交成功", 600, function () {
                        // parent.refreshCurrentTabContent();//刷新当前页面
                        // parent.refreshPjaxContainer();
                        // parent.layer.closeAll();
                        LayerMsgBox.alert("保存成功", 2);
                        return;
                    });
                }
            },


            }

        return editableTableOptions;
    }



    function closeHandler() {
        parent.layer.close(parent.layer.getFrameIndex(window.name));
        window.parent.refreshJBoltTable();
    }


</script>
#include("/_view/_admin/common/_formjs.html",formId="moMaterialsreturnForm")
#end

