<form onsubmit="return false;" id="customermForm" action="#(action)" method="post">
    <input type="hidden" name="customerm.iautoid" id="iautoida" value="#(customerm.iautoid??)" />
    <!--	<div class="form-group row">-->
    <!--		<label class="col-sm-2 col-form-label">客户分类ID</label>-->
    <!--		<div class="col">-->
    <!--			<input type="text" data-with-clearbtn="true" autocomplete="off"  class="form-control"   data-rule="required" placeholder="请输入客户分类ID" maxlength="19" name="customerm.icustomerclassid" value="#(customerm.icustomerclassid??)"/>-->
    <!--		</div>-->
    <!--	</div>-->
    <div class="form-group row">
        <label class="col-sm-1 col-form-label">客户分类</label>
        <div class="col-2">
            <select class="form-control" name="customerm.icustomerclassid"
                    data-autoload
                    data-rule="select"
                    data-text-attr="cccname"
                    data-value-attr="iautoid"
                    data-select-type="select2"
                    data-tips="请选择"
                    data-url="admin/customerclass/enableOptions"
                    data-text="=请选择="
                    data-value=""
                    data-select="#(customerm.icustomerclassid??)">
            </select>
        </div>

        <label class="col-sm-1 col-form-label">客户编码</label>
        <div class="col-2">
            <input type="text" data-with-clearbtn="true" autocomplete="off"  class="form-control"
                   data-rule="required" placeholder="请输入客户编码" maxlength="255" name="customerm.ccuscode"
                   value="#(customerm.ccuscode??)"/>
        </div>

        <label class="col-sm-1 col-form-label">客户名称</label>
        <div class="col-2">
            <input type="text" data-with-clearbtn="true" autocomplete="off"  class="form-control"
                   data-rule="required" placeholder="请输入客户名称" maxlength="255" name="customerm.ccusname"
                   value="#(customerm.ccusname??)"/>
        </div>

        <label class="col-sm-1 col-form-label">简称</label>
        <div class="col-2">
            <input type="text" data-with-clearbtn="true" autocomplete="off"  class="form-control"
                   data-rule="required" placeholder="请输入简称" maxlength="255" name="customerm.ccusabbname"
                   value="#(customerm.ccusabbname??)"/>
        </div>
    </div>


    <div class="form-group row">
        <label class="col-sm-1 col-form-label">助记码</label>
        <div class="col-2">
            <input type="text"  autocomplete="off"  class="form-control"
                   placeholder="请输入助记码" maxlength="255" name="customerm.mnemoniccode"
                   value="#(customerm.mnemoniccode??)"/>
        </div>

        <label class="col-sm-1 col-form-label">地区</label>
        <div class="col-2">
            <input type="text" data-with-clearbtn="true" autocomplete="off"  class="form-control"
                   placeholder="请输入地区" maxlength="255" name="customerm.ccounty" value="#(customerm.ccounty??)"/>
        </div>

        <label class="col-sm-1 col-form-label">分管部门</label>
        <div class="col-2">
            <select class="form-control"
                    data-autoload
                    name="customerm.ccusdepart"
                    data-select-type="select2"
                    data-tips="所属部门"
                    data-url="admin/dept/datas"
                    data-text="=所属部门="
                    data-value=""
                    data-value-attr="id"
                    data-select="#(customerm.ccusdepart??)">
            </select>
        </div>
            <label class="col-sm-1 col-form-label">专管业务员</label>
            <div class="col-2">
                <input type="hidden" id="idutyuserid" name="customerm.idutyuserid" value="#(customerm.idutyuserid??)" />
                <input type="text" autocomplete="off" value="#(cpsnname??)" class="form-control"
                       placeholder="=请选择专管业务员="
                       data-jboltinput
                       data-width="600"
                       data-height="450"
                       readonly
                       data-refresh="true"
                       data-hidden-input="idutyuserid"
                       data-load-type="ajaxportal"
                       data-url="admin/workregionm/personTable"/>
            </div>
        </div>
    </div>

    <div class="form-group row">
        <label class="col-sm-1 col-form-label">币种</label>
        <div class="col-2">
            <select class="form-control"
                    data-autoload
                    name="customerm.ccurrency"
                    data-select-type="select"
                    data-rule="select"
                    data-tips="请选择"
                    data-url="admin/dictionary/options?key=ccurrency"
                    data-text="=请选择数据分类="
                    data-value=""
                    data-value-attr="sn"
                    data-select="#(customerm.ccurrency??)">
            </select>
        </div>

        <label class="col-sm-1 col-form-label">客户管理类型</label>
        <div class="col-2">
            <select class="form-control"
                    data-autoload
                    name="customerm.ccustype"
                    data-select-type="select"
                    data-rule="select"
                    data-tips="请选择客户管理类型"
                    data-url="admin/dictionary/options?key=customer_type"
                    data-text="=请选择数据分类="
                    data-value=""
                    data-value-attr="sn"
                    data-select="#(customerm.ccustype??)">
            </select>
        </div>

        <label class="col-sm-1 col-form-label">对应供应商</label>
        <div class="col-2">
            <input type="hidden" id="cvencode" name="customerm.cvencode" value="#(customerm.cvencode??)" />
            <input type="hidden" id="cvenname" name="customerm.cvenname" value="#(customerm.cvenname??)" />
            <input type="hidden" id="cvenid" name="customerm.cvenid" value="#(customerm.cvenid??)" />
            <input type="text" autocomplete="off" value="#(customerm.cvenname??)" class="form-control"
                   placeholder="=请选择对应供应商="
                   data-jboltinput
                   data-width="600"
                   data-height="450"
                   readonly
                   data-refresh="true"
                   data-hidden-input="cvenid,cvencode,cvenname"
                   data-load-type="ajaxportal"
                   data-url="admin/customer/vendorTable"/>
        </div>

        <label class="col-sm-1 col-form-label">客户级别</label>
        <div class="col-2">
            <select class="form-control"
                    data-autoload
                    name="customerm.ccustomerlevelsn"
                    data-select-type="select2"
                    data-rule="select"
                    data-tips="请选择客户级别"
                    data-url="admin/dictionary/options?key=customer_level"
                    data-text="=请选择数据="
                    data-value=""
                    data-value-attr="sn"
                    data-select="#(customerm.ccustomerlevelsn??)">
            </select>
        </div>
    </div>

    <div class="form-group row">
        <label class="col-sm-1 col-form-label">结算方式</label>
        <div class="col-2">
            <select class="form-control"
                    data-autoload
                    name="customerm.csettleway"
                    data-select-type="select"
                    data-rule="select"
                    data-tips="请选择结算方式"
                    data-url="admin/dictionary/options?key=customer_csettleway"
                    data-text="=请选择数据="
                    data-value=""
                    data-value-attr="sn"
                    data-select="#(customerm.csettleway??)">
            </select>
        </div>

        <label class="col-sm-1 col-form-label">出货单据类型</label>
        <div class="col-2">
            <select class="form-control"
                    data-autoload
                    name="customerm.cshipment"
                    data-select-type="select"
                    data-rule="select"
                    data-tips="请选择客户管理类型"
                    data-url="admin/dictionary/options?key=customer_shipment"
                    data-text="=请选择数据="
                    data-value=""
                    data-value-attr="sn"
                    data-select="#(customerm.cshipment??)">
            </select>
        </div>

        <label class="col-sm-1 col-form-label">客户属性</label>
        <div class="col-2">
            <select class="form-control"
                    data-autoload
                    name="customerm.ccusattribute"
                    data-select-type="select"
                    data-rule="select"
                    data-tips="请选择客户属性"
                    data-url="admin/dictionary/options?key=customer_attribute"
                    data-text="=请选择数据="
                    data-value=""
                    data-value-attr="sn"
                    data-select="#(customerm.ccusattribute??)">
            </select>
        </div>

    </div>

    <div class="form-group row">
        <label class="col-sm-1 col-form-label">位置地址</label>
        <div class="col-11">
            <div class="jbolt_page_content">
                #render("_table_split.html")
            </div>
        </div>
    </div>

    <div class="form-group row">
        <label class="col-sm-1 col-form-label">客户行事历</label>
        <div class="col-11">
            <div class="jbolt_page_content">
                #render("../customerworkdays/_form.html")
            </div>
        </div>
    </div>

    <div class="form-group row"
         data-radio
         data-rule="radio"
         data-value="#(customerm.isenabled??)"
         data-name="customerm.isenabled"
         data-default="options_first"
         data-width="col-sm-2,col"
    >
        <label class="col-sm-1 col-form-label" >是否启用</label>
        <div class="col"  style="padding-top: 1px;">
            <div class="radio radio-primary  radio-inline">
                <input #if(customerm.isenabled=='1'??) checked #end id="r_isenabled_true" type="radio"
                       name="customerm.isenabled" value="true"/>
                <label for="r_isenabled_true">是</label>
            </div>

            <div class="radio radio-primary  radio-inline">
                <input #if(customerm.isenabled=='0'??) checked #end id="r_isenabled_false" type="radio"
                       name="customerm.isenabled" value="false"/>
                <label for="r_isenabled_false">否</label>
            </div>
        </div>
    </div>

    <div class="form-group row">
        <label class="col-sm-1 col-form-label">备注</label>
        <div class="col">
            <input type="text" class="form-control"  placeholder="请输入备注" maxlength="255" name="customerm.cmemo"
                   value="#(customerm.cmemo??)"/>
        </div>
    </div>
</form>
#define js()
<script>

    /**
     * 校验单元格
     * @returns {boolean}
     */
    function checkTd(){
        //执行item表格 每一个修改了的行里是否有必填的没有填写
        var trs=$("#jbolt_table_CustomerWorkDays_#(pageId)").find("tr[data-changed='true']");
        if(isOk(trs)){
            var tds,tempTr,tempTd,tempText,hasInvalid=false,count=0;
            trs.each(function(){
                tempTr=$(this);
                tds=tempTr.find("td[data-changed='true'][class='is-invalid']");
                if(isOk(tds)){
                    hasInvalid = true;
                    count++;
                }
                console.log('count',count);
            });
            if(hasInvalid){
                LayerMsgBox.error("客户行事历表格中存在["+count+"]个不符合的数值,请先修改再作提交",2000);
                return false;
            }
        }
        return true;
    }

    /**
     * 提交方法
     */
    function submitThisForm() {
        // jboltTableSubmit('#jbolt_table_customerd_split_#(pageId)');
        if (checkTd()){
            var tables = ["jbolt_table_customerd_split_#(pageId)","jbolt_table_CustomerWorkDays_#(pageId)"];
            jboltTableSubmitMulti(tables, "/admin/customer/updateEditTable", function (res) {
                // alert("看到这个消息说明多个表格都提交成功了");
                if (res.state === 'ok') {
                    LayerMsgBox.success(res.msg, 1000, function () {
                        // refreshPjaxContainer();
                        parent.LayerMsgBox.closeAll();
                        parent.refreshPjaxContainer();
                    });
                } else {
                    LayerMsgBox.alert(res.msg, 2);
                }
            });
        }
    }
</script>
<!--#include("/_view/_admin/common/_formjs.html",formId="customermForm")-->
#end

