#@jboltLayout()
#define main()
#set(pageId=RandomUtil.random(6))
<div class="jbolt_page" data-key="#(pmkey)" >
    <div class="jbolt_page_content">
    	<div class="row">
            <div class="col-4">
                <div class="card">
                    <div class="card-header">所有部门</div>
                    <div class="card-body">

                        <form class="form-inline jbolt_page_title" id="DepRefDepartmentForm_#(pageId)" onsubmit="return false;" method="post">
                            <input type="text" autocomplete="off" class="form-control ml-xl-1" placeholder="=编码/名称=" name="keywords" value=""/>
                            <button type="submit" class="btn btn-light"><i class="fa fa-search"></i> 查询</button>
                            <button type="reset" class="btn btn-light"><i class="jbicon jb-11zhongzhi"></i> 重置</button>
                        </form>
                        
                        
                        <!-- JBoltTable的数据模板定义-->
		<script type="text/template" id="DepRefDepartmentRowtpl_#(pageId)">
			{@each datas as data,index}
			{# 先循环第一级}
			{@include "#DepRefDepartmentRowtpl_tr_#(pageId)",data}
			{@/each}
		</script>                        
                        <script type="text/template" id="DepRefDepartmentRowtpl_tr_#(pageId)">
                            <tr data-id="${iautoid}" data-pid="${ipid}" data-hasitems="${items&&items.length>0}">
                                <td>${cdepcode}</td>
                                <td>${cdepname}</td>
                            </tr>
							{@if items&&items.length>0}
							{@each items as son}
							{@include "#DepRefDepartmentRowtpl_tr_#(pageId)",son}
							{@/each}
							{@/if}
                        </script>

                        <div class="jbolt_table_view">
                            <div class="jbolt_table_box">
                                <div class="jbolt_table_body">
                                    <table class="jbolt_table jbolt_main_table table-center"
                                           id="jbolt_table_#(pageId)"
                                           data-jbolttable
                                           data-treetable="all:1"
                                           data-ajax="true"
                                           data-width="auto"
                                           data-column-resize="true"
                                           ###data-bind-elements="#rolepermissionAddBtn_#(pageId)1"
                                           data-url="admin/depref/findAllProposalData"
                                           data-autoload="true"
                                           data-conditions-form="DepRefDepartmentForm_#(pageId)"
                                           data-rowtpl="DepRefDepartmentRowtpl_#(pageId)"
                                           data-page="DepRefDepartmentPage_#(pageId)"
                                           data-pagesize="30"
                                           data-row-click-active="true"
                                           data-row-click-handler="jbolt_table_dblclickhandler_#(pageId)"
                                    >
                                        <thead>
                                        <tr>
                                            <th data-width="150" data-column="cdepcode">部门编码</th>
                                            <th data-width="200" data-column="cdepname">部门名称</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>    		
    	</div>
    </div>
</div>
#end

#define js()
<script type="text/javascript">

	function jbolt_table_dblclickhandler_#(pageId)(table, tempTr1, trId1, rowData) {
		alert("点击了!");
		/* $(tempTr1).data('url', '/admin/admin/depref/edit/' + rowData.iautoid)
			.data('area', '1200,800')
			.data('title', '部门对照档案')
			.data('btn', '保存,关闭');

		DialogUtil.openBy(tempTr1); */
	}
</script>
#end
