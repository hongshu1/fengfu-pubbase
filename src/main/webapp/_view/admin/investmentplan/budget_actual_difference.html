#@jboltLayout()
#define main()
#set(pageId=RandomUtil.random(6))
<div class="jbolt_page" data-key="#(pmkey)" >
<div class="jbolt_page_title">
	<div class="row">
		<div class="col-md-auto">
			<form class="form-inline text-left" id="budgetActualDifferenceForm_#(pageId)"  onsubmit="return false;" method="post">
					<input hidden type="text" id="ibudgettype1" value="" name="investmentdiffbudgettype1" autocomplete="off" />
					<input hidden type="text" id="ibudgettype2" value="" name="investmentdiffbudgettype2" autocomplete="off" />
                    <div class="form-group row text-left"
                         data-checkbox
                         ###data-rule="checkbox"
                         data-value=""
                         data-hidden-input="ibudgettype1"
                         data-name="ibudgettype1"
                         ###data-default="1,2,3,4,5" 
                         >
                        <label class="col-auto col-form-label" >日程：</label>
                        <div class="checkbox checkbox-primary  checkbox-inline">
                            <input id="budget_type1_box1" type="checkbox" name="ibudgettype1" value="1"/>
                            <label for="budget_type1_box1">日程</label>
                        </div>
                        <div class="checkbox checkbox-primary  checkbox-inline">
                            <input id="budget_type1_box2" type="checkbox" name="ibudgettype1" value="2"/>
                            <label for="budget_type1_box2">付款</label>
                        </div>
                    </div>						
                    <div class="form-group row text-left"
                         data-checkbox
                         ###data-rule="checkbox"
                         data-value=""
                         data-hidden-input="ibudgettype2"
                         data-name="ibudgettype"
                         ###data-default="1,2,3,4,5" 
                         >
                        <label class="col-auto col-form-label" >预算类型：</label>
                        <div class="checkbox checkbox-primary  checkbox-inline">
                            <input id="c1" type="checkbox" name="ibudgettype" value="1"/>
                            <label for="c1">全年预算a</label>
                        </div>
                        <div class="checkbox checkbox-primary  checkbox-inline">
                            <input id="c2" type="checkbox" name="ibudgettype" value="2"/>
                            <label for="c2">下半年修订b</label>
                        </div>
                        <div class="checkbox checkbox-primary  checkbox-inline">
                            <input id="c4" type="checkbox" name="ibudgettype" value="3"/>
                            <label for="c4">实绩预测d</label>
                        </div>
                        <div class="checkbox checkbox-primary  checkbox-inline">
                            <input id="c5" type="checkbox" name="ibudgettype" value="4"/>
                            <label for="c5">实绩e</label>
                        </div>
                        <div class="checkbox checkbox-primary  checkbox-inline">
                            <input  id="c6" type="checkbox" name="ibudgettype" value="5"/>
                            <label for="c6">差异A（b-a）</label>
                        </div>
                        <div class="checkbox checkbox-primary  checkbox-inline">
                            <input  id="c10" type="checkbox" name="ibudgettype" value="6"/>
                            <label for="c10">差异E（d-a）</label>
                        </div>
                        <div class="checkbox checkbox-primary  checkbox-inline">
                            <input  id="c11" type="checkbox" name="ibudgettype" value="7"/>
                            <label for="c11">差异F（d-b）</label>
                        </div>
                        <div class="checkbox checkbox-primary  checkbox-inline">
                            <input  id="c12" type="checkbox" name="ibudgettype" value="8"/>
                            <label for="c12">差异G（e-a）</label>
                        </div>                          
                        <div class="checkbox checkbox-primary  checkbox-inline">
                            <input  id="c12" type="checkbox" name="ibudgettype" value="9"/>
                            <label for="c12">差异H（e-b）</label>
                        </div>
                        <div class="checkbox checkbox-primary  checkbox-inline">
                            <input  id="c14" type="checkbox" name="ibudgettype" value="10"/>
                            <label for="c14">差异J（e-d）</label>
                        </div>
                    </div>			
				<input type="text" class="form-control"
                           data-date
                           data-type="year"
                           data-rule="required"
                           placeholder="=预算年度="
                           name="ibudgetyear">
                <select class="form-control"
                		data-select-type="select2"
                        name="cdepcode"
                        data-autoload
                        data-tips="u8部门"
                        data-url="admin/department/treeDatas"
                        data-text="=u8部门="
                        data-text-attr="cdepname"
                        data-value-attr="cdepcode"
                        data-setvalueto="cdepcode"
                        data-value=""
                        data-width="200">
                </select>
				<button  type="submit" class="btn btn-outline-secondary" ><i class="fa fa-search"></i> 查询</button>
				<button type="reset" class="btn btn-outline-secondary"><i class="jbicon jb-11zhongzhi"></i> 重置</button>
			</form>
		</div>
	</div>
</div>
    <div class="jbolt_page_content">
        <!-- JBoltTable的数据模板定义-->
        <script type="text/template" id="jboltTable_rowtpl_#(pageId)">
            {@each datas as data,index}
            <tr data-id="${data.iautoid}">
			<td>${data.cdepname}</td>
			<td>${data.cinvestmenttypedesc}</td>
			<td>${data.cproductline}</td>
			<td>${data.careertypedesc}</td>
			<td>${data.cinvestmentdistinctiondesc}</td>
			<td>${data.cplanno}</td>
			<td>${data.citemname}</td>
			<td>$${data.isimport|isLargeAmountExpense}</td>
			<td>${data.iquantity}</td>
			<td>${data.cunit}</td>
			<td>${data.cassettypedesc}</td>
			<td>${data.cpurpose}</td>
			<td>${data.ceffectamount}</td>
			<td>${data.creclaimyear}</td>
			<td>${data.clevel}</td>
			<td>$${data.ispriorreport|isLargeAmountExpense}</td>
			<td>${data.cpaymentprogressdesc}</td>
			<td>${data.itotalamountplan}</td>
			<td>${data.itotalamountactual}</td>
			<td>${data.itotalamountdiff}</td>
			<td>${data.itotalamountdiffreason}</td>
			<td>${data.iyeartotalamountplan}</td>
			<td>${data.iyeartotalamountactual}</td>
			<td>${data.iyeartotalamountdiff}</td>
			<td>${data.iyeartotalamountdiffreason}</td>
			<td>${data.cedittypedesc}</td>
			<td>$${data.isscheduled|isscheduled}</td>
			<td>${data.cmemo}</td>
			<td>${data.iitemyear}</td>
			<td>$${data.ibudgettype1|iBudgetType1}</td>
			<td>$${data.ibudgettype2|iBudgetType2}</td>
			{@if data.ibudgettype1 == 2}<td>${data.imonthamount1|kFormat}</td>{@else}<td>${data.imonthamount1}</td>{@/if}
			{@if data.ibudgettype1 == 2}<td>${data.imonthamount2|kFormat}</td>{@else}<td>${data.imonthamount2}</td>{@/if}
			{@if data.ibudgettype1 == 2}<td>${data.imonthamount3|kFormat}</td>{@else}<td>${data.imonthamount3}</td>{@/if}
			{@if data.ibudgettype1 == 2}<td>${data.imonthamount4|kFormat}</td>{@else}<td>${data.imonthamount4}</td>{@/if}
			{@if data.ibudgettype1 == 2}<td>${data.imonthamount5|kFormat}</td>{@else}<td>${data.imonthamount5}</td>{@/if}
			{@if data.ibudgettype1 == 2}<td>${data.imonthamount6|kFormat}</td>{@else}<td>${data.imonthamount6}</td>{@/if}
			{@if data.ibudgettype1 == 2}<td>${data.imonthamount7|kFormat}</td>{@else}<td>${data.imonthamount7}</td>{@/if}
			{@if data.ibudgettype1 == 2}<td>${data.imonthamount8|kFormat}</td>{@else}<td>${data.imonthamount8}</td>{@/if}
			{@if data.ibudgettype1 == 2}<td>${data.imonthamount9|kFormat}</td>{@else}<td>${data.imonthamount9}</td>{@/if}
			{@if data.ibudgettype1 == 2}<td>${data.imonthamount10|kFormat}</td>{@else}<td>${data.imonthamount10}</td>{@/if}
			{@if data.ibudgettype1 == 2}<td>${data.imonthamount11|kFormat}</td>{@else}<td>${data.imonthamount11}</td>{@/if}
			{@if data.ibudgettype1 == 2}<td>${data.imonthamount12|kFormat}</td>{@else}<td>${data.imonthamount12}</td>{@/if}
			{@if data.ibudgettype1 == 2}<td>${data.ifirsthalfofyear|kFormat}</td>{@else}<td>${data.ifirsthalfofyear}</td>{@/if}
			{@if data.ibudgettype1 == 2}<td>${data.isecondhalfofyear|kFormat}</td>{@else}<td>${data.isecondhalfofyear}</td>{@/if}
			{@if data.ibudgettype1 == 2}<td>${data.iallofyear|kFormat}</td>{@else}<td>${data.iallofyear}</td>{@/if}
            </tr>
            {@/each}
        </script>

        <table class="jbolt_table jbolt_main_table thead_font_normal table-center"
               data-jbolttable
               id="jbolt_Table_#(pageId)"
               data-autoload="false"
               data-ajax="true"
               data-url="/admin/investmentplan/findBudgetActualDifferenceDatas"
               data-column-resize="true"
               data-bind-elements="#jbolt_righttop_btn_group_#(pageId)>button"
               data-rowtpl="jboltTable_rowtpl_#(pageId)"
               data-column-prepend="1:checkbox:true"
               data-height="fill"
               data-conditions-form="budgetActualDifferenceForm_#(pageId)"
               data-ajax-success-handler="ajaxSuccessHandler_#(pageId)"
        >
            <thead class="fw_normal">
            <tr>
	            <th data-width="100" data-column="cdepname" rowspan="2">部门</th>
	            <th data-width="100" data-column="cinvestmenttypedesc" rowspan="2">投资类型</th>
	            <th data-width="100" data-column="cproductline" rowspan="2">生产线</th>
	            <th data-width="100" data-column="careertypedesc" rowspan="2">事业区分</th>
	            <th data-width="90" data-column="cinvestmentdistinctiondesc" rowspan="2">投资区分</th>
	            <th colspan="9">内容</th>
	            <th data-width="100" data-column="clevel" rowspan="2">等级区分</th>
	            <th data-width="130" data-column="ispriorreport" rowspan="2">是否需要做事前报告</th>
	            <th data-width="130" data-column="cpaymentprogressdesc" rowspan="2">实施阶段</th>
	            <th colspan="4">项目总金额(含税)</th>
	            <th colspan="4">年度总金额(含税)</th>
	            <th data-width="100" data-column="cedittypedesc" rowspan="2">修订区分</th>
	            <th data-width="25" data-column="isscheduled" rowspan="2">计划内/外</th>
	            <th data-width="25" data-column="cmemo" rowspan="2">备注</th>
	            <th data-width="50" data-column="iitemyear" rowspan="2">立项年份</th>
	            <th colspan="2">预算类型</th>
	            <th data-width="50" data-column="imonthamount1" rowspan="2">1月</th>
	            <th data-width="50" data-column="imonthamount2" rowspan="2">2月</th>
	            <th data-width="50" data-column="imonthamount3" rowspan="2">3月</th>
	            <th data-width="50" data-column="imonthamount4" rowspan="2">4月</th>
	            <th data-width="50" data-column="imonthamount5" rowspan="2">5月</th>
	            <th data-width="50" data-column="imonthamount6" rowspan="2">6月</th>
	            <th data-width="50" data-column="imonthamount7" rowspan="2">7月</th>
	            <th data-width="50" data-column="imonthamount8" rowspan="2">8月</th>
	            <th data-width="50" data-column="imonthamount9" rowspan="2">9月</th>
	            <th data-width="50" data-column="imonthamount10" rowspan="2">10月</th>
	            <th data-width="50" data-column="imonthamount11" rowspan="2">11月</th>
	            <th data-width="50" data-column="imonthamount12" rowspan="2">12月</th>
	            <th data-width="50" data-column="ifirsthalfofyear" rowspan="2">上半年</th>
	            <th data-width="50" data-column="isecondhalfofyear" rowspan="2">下半年</th>
	            <th data-width="50" data-column="iallofyear" rowspan="2">全年合计</th>
            </tr>
            <tr>
            	<th data-width="50" data-column="cplanno">投资No.</th>
            	<th data-width="50" data-column="citemname">项目细项名称</th>
            	<th data-width="50" data-column="isimport">是否进口</th>
            	<th data-width="50" data-column="iquantity">数量</th>
            	<th data-width="50" data-column="cunit">单位</th>
            	<th data-width="50" data-column="cassettypedesc">资产类别</th>
            	<th data-width="50" data-column="cpurpose">目的</th>
            	<th data-width="50" data-column="ceffectamount">效果金额</th>
            	<th data-width="50" data-column="creclaimyear">回收年限</th>
            	<th data-width="50" data-column="itotalamountplan">计划</th>
            	<th data-width="50" data-column="itotalamountactual">实绩/预测/修订</th>
            	<th data-width="50" data-column="itotalamountdiff">差异</th>
            	<th data-width="50" data-column="itotalamountdiffreason">差异原因</th>
            	<th data-width="50" data-column="iyeartotalamountplan">计划</th>
            	<th data-width="50" data-column="iyeartotalamountactual">实绩/预测/修订</th>
            	<th data-width="50" data-column="iyeartotalamountdiff">差异</th>
            	<th data-width="50" data-column="iyeartotalamountdiffreason">差异原因</th>
            	<th data-width="50" data-column="ibudgettype1">日程</th>
            	<th data-width="50" data-column="ibudgettype2">类型</th>
            </tr>
            </thead>
            <tbody id="datatr1"></tbody>
        </table>
    </div>

</div>
#end
#define js()
<script>
function ajaxSuccessHandler_#(pageId)(table) {
	   $('.jbolt_table').tablesMergeCell({
	      cols: [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]
	   })
}
</script>

#end

