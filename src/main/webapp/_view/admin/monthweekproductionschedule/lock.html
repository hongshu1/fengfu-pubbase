#@jboltLayout()
#define main()
<div class="jbolt_page">
    <div class="jbolt_page_content">

        <div class="card">
            <div class="card-body">
                <form id="forms">
                    <div class="form-group row">
                        <label class="col-sm-3 col-form-label">截止日期：</label>
                        <!--data-ajax-check-url="/admin/monthweekproductionschedule/ajaxCheckLockDate"-->
                        <div class="col">
                            <input type="text"
                                   class="form-control"
                                   style="display: inline-block;"
                                   data-min="0"
                                   data-max="2099-01-01"
                                   id="lockDate"
                                   data-rule="required"
                                   data-date
                                   data-type="date"
                                   data-fmt="yyyy-MM-dd"
                                   name="lockDate"
                                   value="#datetime((lockDate?? DateUtil.getNow()),'yyyy-MM-dd')"/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-3 col-form-label">周次：</label>
                        <div class="col">
                            <input type="text" class="form-control" value="第#(lockWeek??)周" disabled>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
#end

#define js()
<script src="../../../assets/plugins/scripts/myTool.js" type="text/javascript"></script>
<script>

    //点确定按钮的处理逻辑 获取到选中的一条数据 然后调用parent里定义的setChooseDialogSelectResult
    function submitThisForm(callback) {
        if (FormChecker.check(forms)) {
            var lockDate = $("#lockDate").val()
            parent.setChooseDialogSelectResultLock(lockDate);
            if (callback)
                callback();
        }
    }

    function getWeek() {
        var lockDate = $("#lockDate").val()
        let date = DateUtils.getDate(lockDate);
        var year = date.getFullYear();
        var week = Math.ceil((now.getTime() - new Date(year, 0, 1).getTime()) / (24 * 60 * 60 * 1000) / 7);
    }
</script>
#end