#@jboltLayout()
#define main()
<div class="jbolt_page">
    <div class="jbolt_page_content">

        <div class="card">
            <div class="card-body">
                <form id="forms">
                    <!-- 输入框组件 -->
                    <div class="form-group row">
                        <div class="col">
                            <div class="jbolt_table_toolbar" id="workclass_toolbar">
                                已排层级：
                            </div>
                            <table class="jbolt_table jbolt_main_table table-center" data-toolbar="workclass_toolbar" data-max-height="400" data-jbolttable>
                                <thead>
                                <tr>
                                    <th data-width="100">排产层级</th>
                                    <th data-column="version">排产截止时间</th>
                                    <th data-column="publish_time">锁定截止时间</th>
                                </tr>
                                </thead>
                                <tbody>
                                #for(data:dataList??)
                                <tr>
                                    <td>#(data.hierarchy??)</td>
                                    <td>#(data.schedulingDeadline??)</td>
                                    <td>#(data.lockDeadline??)</td>
                                </tr>
                                #end
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-3 col-form-label">截止日期：</label>
                        <div class="col">
                            <input type="text"
                                   class="form-control"
                                   style="display: inline-block;"
                                   placeholder="指定年"
                                   data-min="0"
                                   data-max="2099-01-01"
                                   id="layDate"
                                   data-rule="required"
                                   data-date
                                   data-type="date"
                                   data-fmt="yyyy-MM-dd"
                                   name="layDate"
                                   value="#datetime((layDate?? DateUtil.getNow()),'yyyy-MM-dd')"/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-3 col-form-label">排产层级：</label>
                        <div class="col">
                            <select id="hierarchy"
                                    class="form-control"
                                    data-width="200"
                                    data-autoload
                                    data-url="admin/dictionary/options?key=pslevel_type"
                                    data-select-type="select"
                                    name="dataPermission.objectType"
                                    data-rule="select"
                                    data-notnull="true"
                                    data-value="1"
                                    data-value-attr="sn"
                                    data-select="#(dataPermission.objectType??)"></select>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
#end

#define js()
<script>

    //点确定按钮的处理逻辑 获取到选中的一条数据 然后调用parent里定义的setChooseDialogSelectResult
    function submitThisForm(callback) {
        if (FormChecker.check(forms)) {
            var layDate = $("#layDate").val()
            var hierarchy = $("#hierarchy").val()
            parent.setChooseDialogSelectResultWeek(layDate, hierarchy);
            if (callback)
                callback();
        }
    }
</script>
#end