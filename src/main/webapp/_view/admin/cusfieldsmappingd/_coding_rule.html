#if(isencoded == 'true')
#set(pageId=RandomUtil.random(6))
<div class="card">
    <div class="card-header">导入字段映射编码</div>
    <div class="card-body">
        
        <!-- 定义JBoltTable使用的数据渲染模板 -->
        <textarea class="jb_tpl_box" id="CusfieldsmappingdCodingrule_tpl_#(pageId)">
        {@each datas as data,index}
        <tr data-id="${data.iautoid}">
            <!--<td>${pageNumber,pageSize,index | rownum}</td>-->
            <!--<td>
            </td>-->
            <td>
                <a tooltip data-title="上移" href="javascript:void(0)" onclick="jboltTableTrMoveUp(this, true, 'iseq');updateDemoCode();"   class="jbolt_table_btn"><i class="fa fa-arrow-up c-info"></i></ a>
                <a tooltip data-title="下移" href="javascript:void(0)" onclick="jboltTableTrMoveDown(this, true, 'iseq');updateDemoCode();" class="jbolt_table_btn"><i class="fa fa-arrow-down c-info"></i></ a>
            </td>
            <td>${data.cname}</td>
            <td>${data.ilength|number_format1}</td>
            <td>${data.cchar}</td>
        </tr>
        {@/each}
        </textarea>
        
        <div class="jbolt_table_toolbar" id="CusfieldsmappingdCodingrule_toolbar_#(pageId)">
            <div class="btn-group btn-group-sm" role="group" aria-label="btn-group">
                <button onclick="jboltTableInsertEmptyRow(this)" class="btn btn-outline-primary btn-sm" ><i class="fa fa-plus"></i> 新增</button>
                <button onclick="jboltTableRemoveCheckedRow(this,true)" class="btn btn-outline-danger btn-sm"><i class="fa fa-trash"></i> 删除</button>
                <button onclick="updateDemoCode(this)" class="btn btn-outline-primary btn-sm">预览编码</button>
            </div>
        </div>
        
        <form id="CusfieldsmappingdCodingrule_form_#(pageId)">
            <input type="hidden" name="icusfieldsmappingdid" value="#(icusfieldsmappingdid)">
        </form>
        
        <table class="jbolt_table jbolt_main_table  table-center "
               id="jbolt_table_#(pageId)"
               #if(icusfieldsmappingdid)
               data-url="admin/cusfieldsmappingdcodingrule/datas"
               data-ajax-success-handler="tableAjaxSuccessHandler_#(pageId)"
               #else
               data-autoload="false"
               #end
               data-jbolttable
               data-width="auto"
               data-height="250"
               data-ajax="true"
               data-conditions-form="CusfieldsmappingdCodingrule_form_#(pageId)"
               data-rowtpl="CusfieldsmappingdCodingrule_tpl_#(pageId)"
               data-copy-to-excel="false"
               data-column-resize="true"
               data-toolbar="CusfieldsmappingdCodingrule_toolbar_#(pageId)"
               data-column-prepend="1:checkbox:true:false:false"
               data-editable="true"
               data-editable-option="getEditableTableOptions_#(pageId)"
        >
            <thead>
            <tr>
                <!--<th data-width="60" data-column="index">序号</th>-->
                <!--<th data-width="80">操作</th>-->
                <th data-width="100" data-column="iseq">操作</th>
                <th data-width="100" data-column="itype">类型</th>
                <th data-width="100" data-column="ilength">编码长度</th>
                <th data-width="150" data-column="cseparator">分隔符</th>
            </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
</div>

<div class="form-group row">
    <label class="col-sm-2 col-form-label">编码示例</label>
    <div class="col-10" id="cDemo">
    </div>
</div>

<div class="form-group row">
    <label class="col-sm-2 col-form-label">编码字段长度</label>
    <div class="col-10">
        <span id="ilength"></span>
    </div>
</div>

#else
#end
#include("_coding_rule_js.html")