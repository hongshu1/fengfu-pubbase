<form onsubmit="return false;" id="CusFieldsMappingD_Form" action="#(action)" method="post">
    
    #if(cusFieldsMappingD.iAutoId??)
    <input type="hidden" name="cusFieldsMappingD.iAutoId" value="#(cusFieldsMappingD.iAutoId??)"/>
    #else
    <input type="hidden" name="cusFieldsMappingD.iCusFieldsMappingMid" value="#(cusFieldsMappingD.iCusFieldsMappingMid??)">
    #end
    
    <div class="row">
        <div class="col">
            <div class="form-group row">
                <label class="col-sm-2 col-form-label">格式名称</label>
                <div class="col-10">
                    <input type="text" value="#(cusfieldsmappingm.cformatname)" disabled/>
                </div>
            </div>
            <div class="form-group row">
                <label class="col-sm-2 col-form-label">表单名称</label>
                <div class="col-10">
                    <input type="text" value="#(cformnames)" disabled/>
                </div>
            </div>
            
            <div class="form-group row">
                <label class="col-sm-2 col-form-label">系统字段名称</label>
                <div class="col-10">
                    <input type="hidden" name="cusFieldsMappingD.iFormFieldId" value="#(cusFieldsMappingD.iFormFieldId??)" id="iFormFieldId" data-sync-attr="iautoid"/>

                    <input type="text" class="form-control"
                           data-autocomplete
                           data-url="admin/formfield/autocomplete?iformid=#(iformids[0])"
                           data-rule="required"
                           data-sync-ele="#iFormFieldId"
                           data-text-attr="cfieldname"
                           data-column-attr="cfieldcode,cfieldname"
                           placeholder="请选择系统字段"
                           data-tips="请选择系统字段"
                           data-header="字段编码,字段名称"
                           maxlength="40"
                           value="#(cusFieldsMappingD.iFormFieldId??)">
                </div>
            </div>

            <div class="form-group row"
                 data-radio
                 data-name="cusFieldsMappingD.isEncoded"
                 data-value-attr="sn"
                 data-default="options_first"
                 data-url="admin/dictionary/options?key=options_boolean"
                 data-label="是否编码字段"
                 data-width="col-sm-2,col-10"
                 data-value="#(cusFieldsMappingD.isEncoded??)"
                 data-rule="radio"
                 data-notnull="true"
                 data-tips="请输入是否编码字段"
                 data-handler="changeIsEncoded_#(pageId)"
                 data-inline="true">
            </div>

            <div class="form-group row">
                <label class="col-sm-2 col-form-label">导入字段名称</label>
                <div class="col-10">
                    <input type="text" data-rule="required" data-notnull="true" data-tips="请输入导入字段名称" data-with-clearbtn="true" autocomplete="off" class="form-control" placeholder="请输入导入字段名称" maxlength="40" name="cusFieldsMappingD.cCusFieldName" value="#(cusFieldsMappingD.cCusFieldName??)"/>
                </div>
            </div>

            #ajaxPortal("/admin/cusfieldsmappingd/codingrule?icusfieldsmappingdid=" + (cusFieldsMappingD.iautoid??) + "&isencoded=" + (cusFieldsMappingD.isencoded??'1' == '1'),"cusfieldmappingd_portal_" + pageId, true)
            
            <div class="form-group row"
                 data-radio
                 data-name="cusFieldsMappingD.isEnabled"
                 data-value-attr="sn"
                 data-default="options_first"
                 data-url="admin/dictionary/options?key=options_enable"
                 data-label="是否启用"
                 data-width="col-sm-2,col-10"
                 data-value="#(cusFieldsMappingD.isEnabled??)"
                 data-rule="radio"
                 data-notnull="true"
                 data-tips="请输入是否启用"
                 data-inline="true"
            >
            </div>
        </div>
    </div>
</form>

#define js()
<script>
    
    var loaded = false;

    function changeIsEncoded_#(pageId)(r, v) {
        if (!loaded) {
            loaded = true;
            return;
        }
        
        if (loaded) {
            AjaxPortalUtil.go('cusfieldmappingd_portal_#(pageId)', '/admin/cusfieldsmappingd/codingrule?pageId=#(pageId)&icusfieldsmappingmid=#(cusFieldsMappingD.icusfieldsmappingmid)&isencoded=' + v);
        }
    }
    
    var cseparatorMap;

    getDictMap('encoding_field_separator', function (data) {
        cseparatorMap = data;
        console.log(cseparatorMap);
    });
    
</script>
#end

