#@jboltLayout()
#define main()
<div class="jbolt_page">
<div class="jbolt_page_content">
    <form onsubmit="return false;" id="qcInspectionForm" action="admin/qcinspection/updateEditTable" method="post">
        <input type="hidden" name="iautoid" value="#(qcInspection.iautoid??)" />
        <!-- 工具条 toolbar -->
        <div class="jbolt_table_toolbar" id="bomcompare_split_toolbar_#(pageId)">
            <div class="col-md-l pt-2" role="group" aria-label="btn-group">
                <button onclick="submitThisForm()" class="btn btn-success btn-sm"><i class="fa fa-refresh"></i> 保存</button>
                <button onclick="closeHandler()" class="btn btn-info btn-sm"><i class="fa fa-window-maximize"></i> 关闭</button>
            </div>
        </div>

        <div class="form-group row">
            <label class="col-sm-2 col-form-label">连锁No.：</label>
            <div class="col-sm-2 col-form-label">
                        <input type="text"
                               #if(qcInspection.autoid??) disabled #end
                               data-autocomplete
                               data-url="admin/dictionary/options?key=cBadnessSns"
                               data-header="名称,编码"
                               data-column-attr="name,sn"
                               data-text-attr="sn"
                               data-value-attr="name"
                               data-sync-ele="#ccname"
                               data-rule="required"
                               data-notnull="true"
                               autocomplete="off" class="form-control" maxlength="30"  name="cchainno" value="#(qcInspection.cchainno??)"/>
            </div>
            <label class="col-sm-2 col-form-label">分类：</label>
            <div class="col-sm-2 col-form-label">
                <input type="text" id="ccname" class="form-control border-none" name="cchainname" placeholder="" value="#(qcInspection.cchainname??)"/>
            </div>

            <label class="col-sm-2 col-form-label">首再发：</label>
            <div class="col-sm col-form-label">
                <div class="form-group row"
                     data-radio
                     data-rule="radio"
                     data-value="#(qcInspection.isfirstcase??)"
                     data-name="isfirstcase"
                     data-default="true">
                    <div class="col"  style="padding-top: 1px;">
                        <div class="radio radio-primary  radio-inline">
                            <input  id="renabletrue1" type="radio" name="isfirstcase"   value="1"/>
                            <label for="renabletrue1">首发</label>
                        </div>

                        <div class="radio radio-primary  radio-inline">
                            <input  id="renablefalse1" type="radio" name="isfirstcase"   value="0"/>
                            <label for="renablefalse1">再发</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="form-group row">
            <label class="col-sm-2 col-form-label">发现日期：</label>
            <div class="col-sm-2 col-form-label">
                <input type="text" data-date data-type="date" data-fmt="yyyy-MM-dd" readonly="readonly" autocomplete="off" class="form-control" placeholder="请设置发现日期" data-tips="请设置发现日期" maxlength="10" name="drecorddate" value="#(qcInspection.drecorddate??)"/>
            </div>

            <label class="col-sm-2 col-form-label">品质担当：</label>
            <div class="col-sm-2 col-form-label">
                <input type="text"
                       #if(qcInspection.autoid??) disabled #end
                       data-autocomplete
                       data-url="admin/QcInspection/DepartmentList"
                       data-header="人员,部门"
                       data-column-attr="psnname,depname"
                       data-text-attr="psnname"
                       data-value-attr="depname"
                       data-sync-ele="#depname,#depnameId,#psnnameId"
                       data-rule="required"
                       data-notnull="true"
                       autocomplete="off" class="form-control" maxlength="30"  name="psnname" value="#(qcInspection.psnname??)"/>
            </div>


            <label class="col-sm-2 col-form-label">责任科室：</label>
            <div class="col-sm-2 col-form-label">
                <input type="text" id="depname" class="form-control border-none" name="depname" value="#(qcInspection.depname??)"/>
                <input type="hidden" data-sync-attr="iqcdutypersonid" id="depnameId" name="depnameid" value="#(qcInspection.iqcdutypersonid??)" />
                <input type="hidden" data-sync-attr="iqcdutydepartmentid" id="psnnameId" name="psnnameid" value="#(qcInspection.iqcdutydepartmentid??)" />
            </div>
        </div>

        <div class="form-group row">
            <label class="col-sm-2 col-form-label">位置/区域：</label>
            <div class="col-sm-2 col-form-label"  style="margin-right: 100px">
                <textarea  style="width: 400px; height: 150px; resize: none" type="text" maxlength="300" class="form-control border-none" name="cplace" placeholder="" value="#(qcInspection.cplace??)">#(qcInspection.cplace??)</textarea>
            </div>
            <div class="col-form-label">
            </div>

            <label class="col-sm-2 col-form-label">问题点：</label>
            <div class="col-sm-3 col-form-label">
                <textarea style="width: 400px; height: 150px; resize: none" type="text"  maxlength="300" class="form-control border-none" name="cproblem" placeholder="" value="#(qcInspection.cproblem??)">#(qcInspection.cproblem??)</textarea>
            </div>
        </div>

        <div class="form-group row">
            <label class="col-sm-2 col-form-label">原因分析：</label>
            <div class="col-sm-2 col-form-label"  style="margin-right: 100px">
                <textarea  style="width: 400px; height: 150px; resize: none" type="text" maxlength="300" class="form-control border-none" name="canalysis" placeholder="" value="#(qcInspection.canalysis??)">#(qcInspection.canalysis??)</textarea>
            </div>
            <div class="col-form-label">
            </div>

            <label class="col-sm-2 col-form-label">对策：</label>
            <div class="col-sm-3 col-form-label">
                <textarea style="width: 400px; height: 150px; resize: none" type="text"  maxlength="300" class="form-control border-none" name="cmeasure" placeholder="" value="#(qcInspection.cmeasure??)">#(qcInspection.cmeasure??)</textarea>
            </div>
        </div>


        <div class="form-group row">

            <label class="col-sm-2 col-form-label">日期：</label>
            <div class="col-sm-2 col-form-label">
                <input type="text" data-date data-type="date" data-fmt="yyyy-MM-dd" readonly="readonly" autocomplete="off" class="form-control" placeholder="请设置日期" data-tips="请设置日期" maxlength="10" name="ddate" value="#(qcInspection.ddate??)"/>
            </div>
            <label class="col-sm-2 col-form-label">担当：</label>
            <div class="col-sm-2 col-form-label">
                <select style="width:150px" class="form-control"
                        data-autoload
                        data-text="=担当="
                        value="#(qcInspection.idutypersonid??)"
                        name="idutypersonid">
                    <option value="">=担当=</option>
                </select>
            </div>

            <label class="col-sm-2 col-form-label">判定：</label>
            <div  class="col-sm-2 col-form-label">
                <select class="form-control"
                        data-rule="required"
                        data-autoload
                        data-url="admin/dictionary/options?key=iestimate"
                        name="iestimate"
                        data-refresh="false"
                        data-text="=请选择="
                        data-value-attr="sn"
                        data-select="#(qcInspection.iestimate??)"></select>
            </div>
        </div>


        <div class="form-group row">
            <label class="col-sm-2 col-form-label">对策上传：</label>
            <div  class="col">
                <div id="fileShowFlag" class="j_upload_file_box"
                     data-name="file"
                     data-multi="true"
                     #if(type=='0') style="display: none" #end
                     data-value-attr="id"
                     data-filebox="filebox_#(pageId)"
                     data-btn-class="btn btn-primary"
                     data-maxsize="20480"
                     data-handler="uploadMultipleFile"
                     data-placeholder="选择附件上传"
                     data-url="admin/qcinspection/uploadFiles"
                     data-hiddeninput="attachment_#(pageId)"
                ></div>
                <div class="j_upload_filebox_multi mt-3">
                    <ul class="j_filebox" id="filebox_#(pageId)" data-remove-confirm="true">
                        #for(data : files)
                        <li data-filebox="filebox_#(pageId)" data-hiddeninput="attachment_#(pageId)"><a target="_blank" data-path="#(data.id)" href="#realImage(data.localUrl)">#(data.filename)</a>
                            <i  id="fileDelShowFlag" title="删除" onclick="removeUploadFileBoxLi(this)" class="fa fa-trash text-danger ml-3"></i>
                        </li>
                        #end
                    </ul>
                </div>
            </div>
        </div>
        <input type="hidden" readonly="readonly" data-tips="请在下方选择文件上传"
               name="fileData" id="attachment_#(pageId)" value="#(fileData??)"
               class="form-control"/>







    </form>
</div>
</div>
#define js()
<script>

    function closeHandler(){
        parent.layer.close(parent.layer.getFrameIndex(window.name));
        window.parent.refreshJBoltTable();
    }

    if(isOk('#(type??)')){
        hideParentLayerDialogBtn(0);
    }
</script>
#include("/_view/_admin/common/_formjs.html",formId="qcInspectionForm")
#end
#end
