#@jboltLayout()
#define main()
<div class="row">
  <div class="col">
    <div class="card" style="margin-bottom: 5px">
      <div class="card-body">
        <div class="col">
          <button onclick="submitThisForm()"
                  class="btn btn-success btn-sm"><i class="fa fa-refresh"></i> 保存
          </button>
          <button onclick="closeHandler()"
                  class="btn btn-info btn-sm"><i class="fa fa-window-maximize"></i> 关闭
          </button>
        </div>
      </div>
    </div>
    <div class="card" style="margin-bottom: 5px">
      <div class="card-body">
        <form onsubmit="return false;" id="SysMaterialsprepare_Form" action="#(action)" method="post">
          #if(moPickItemM.AutoID??)
          <input type="hidden" name="sysMaterialsprepare.autoid" value="#(sysMaterialsprepare.AutoID??)"/>
          #end
          <div class="row">
            <div class="col-md-4">
              <div class="form-group row">
                <label class="col-sm-2 col-form-label">工单号：</label>
                <div class="col-10">
                  <input type="text"  data-notnull="false"
                         data-tips=""
                         data-with-clearbtn="false" autocomplete="off"
                         class="form-control" placeholder=""
                         maxlength="40" name="sysMaterialsprepare.BillNo"
                         readonly
                         value="#(cmodocno??)"/>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-group row">
                <label class="col-sm-2 col-form-label">机型 ：</label>
                <div class="col-10">
                  <input type="text"  data-notnull="false"
                         data-tips=""
                         data-with-clearbtn="false" autocomplete="off"
                         class="form-control" placeholder=""
                         maxlength="40" name="sysMaterialsprepare.cMoDocNo"
                         readonly
                         value="#(cequipmentmodelname??)"/>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-group row">
                <label class="col-sm-2 col-form-label">存货编码：</label>
                <div class="col-10">
                  <input type="text"  data-notnull="false"
                         data-tips=""
                         data-with-clearbtn="false" autocomplete="off"
                         class="form-control"
                         placeholder="" maxlength="40" name="sysMaterialsprepare.cInvName1"
                         readonly
                         value="#(cinvcode??)"/>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-group row">
                <label class="col-sm-2 col-form-label">客户部番：</label>
                <div class="col-10">
                  <input type="text"  data-notnull="false"
                         data-tips=""
                         data-with-clearbtn="false" autocomplete="off"
                         class="form-control"
                         placeholder="" maxlength="40" name="sysMaterialsprepare.iEquipmentModelId"
                         readonly
                         value="#(cinvcode1??)"/>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-group row">
                <label class="col-sm-2 col-form-label">部品名称：</label>
                <div class="col-10">
                  <input type="text"  data-notnull="false"
                         data-tips=""
                         data-with-clearbtn="false" autocomplete="off"
                         class="form-control"
                         placeholder="" maxlength="40" name="sysMaterialsprepare.cInvCode1"
                         readonly
                         value="#(cinvname1??)"/>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-group row">
                <label class="col-sm-2 col-form-label">计划数量：</label>
                <div class="col-10">
                  <input type="text"  data-notnull="false"
                         data-tips=""
                         data-with-clearbtn="false" autocomplete="off"
                         class="form-control"
                         placeholder="" maxlength="40" name="sysMaterialsprepare.cDepName"
                         readonly
                         value="#(iqty??)"/>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-group row">
                <label class="col-sm-2 col-form-label">计划日期：</label>
                <div class="col-10">
                  <input type="text"  data-notnull="false"
                         data-tips=""
                         data-with-clearbtn="false" autocomplete="off"
                         class="form-control"
                         placeholder="" maxlength="40" name="sysMaterialsprepare.dPlanDate"
                         readonly
                         value="#(dplandate??)"/>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-group row">
                <label class="col-sm-2 col-form-label">生产部门：</label>
                <div class="col-10">
                  <input type="text"  data-notnull="false"
                         data-tips=""
                         data-with-clearbtn="false" autocomplete="off"
                         class="form-control"
                         placeholder="" maxlength="40" name="sysMaterialsprepare.cBatch"
                         readonly
                         value="#(cdepname??)"/>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-group row">
                <label class="col-sm-2 col-form-label">产线名称：</label>
                <div class="col-10">
                  <input type="text"  data-notnull="false"
                         data-tips=""
                         data-with-clearbtn="false" autocomplete="off"
                         class="form-control"
                         placeholder="" maxlength="40" name="sysMaterialsprepare.cBatch"
                         readonly
                         value="#(cworkname??)"/>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-group row">
                <label class="col-sm-2 col-form-label">班次名称：</label>
                <div class="col-10">
                  <input type="text"  data-notnull="false"
                         data-tips=""
                         data-with-clearbtn="false" autocomplete="off"
                         class="form-control"
                         placeholder="" maxlength="40" name="sysMaterialsprepare.cBatch"
                         readonly
                         value="#(cworkshiftname??)"/>
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>


    <div class="card" style="margin-bottom: 5px">
    <div class="card-body">
      <div class="col">
        <button data-dialogbtn
                data-area="80%,70%"
                data-handler="jboltTablePageToFirst"
                data-title="选择存货"
                data-url="admin/sysMaterialsprepare/MaterialsListchoose?cmodocno=#(cmodocno??)"
                class="btn btn-success btn-sm"><i class="fa fa-refresh"></i> 新增
        </button>
      </div>
    </div>
    </div>


  </div>
</div>



<textarea class="jb_tpl_box" id="SysMaterialsprepare_tpl_#(pageId)">
{@each datas as data,index}
<tr data-id="${data.autoid}">
<td>${pageNumber,pageSize,index | rownum}</td>
<td>${data.invcode}</td>
<td>${data.cinvcode1}</td>
<td>${data.cinvname1}</td>
<td>${data.cinvstd}</td>
<td>${data.cUomName}</td>
<td>
     <input type="text" class="form-control " placeholder="" maxlength="20" name="iplanqty" value=""/>
</td>
  <td>${data.cwhname}</td>
  <td>${data.cpositionname}</td>
<td>
	<a type="button" onclick="DElete(this)" style="user-select:none"  ><i class="fa c-danger">移除</i></a>
</td>
<!--<td>-->
<!--	<a class="jbolt_table_delbtn" href="admin/sysmaterialspreparedetail/${data.isDeleted?'realDelete':'delete'}/${data.autoid}" data-handler="refreshJBoltTable" ><i class="fa c-danger">移除</i></a>-->
<!--</td>-->
</tr>
{@/each}
</textarea>
<table class="jbolt_table jbolt_main_table table-center"
       data-jbolttable
       data-width="fill"
       data-height="65%"
       data-ajax="true"
       data-url="admin/sysMaterialsprepare/manualDatas"
       data-rowtpl="SysMaterialsprepare_tpl_#(pageId)"
       data-copy-to-excel="false"
       data-page="SysMaterialsprepare_page"
       data-column-resize="true"
       data-toolbar="SysMaterialsprepare_toolbar_#(pageId)"
       id="manual"
       data-editable="true"
>
  <thead class="fw-normal">
  <tr>
    <th data-width="60" data-column="">序号</th>
    <th data-width="150" data-column="cinvcode">存货编码</th>
    <th data-min-width="150" data-column="cinvcode1">客户部番</th>
    <th data-width="250" data-column="cinvname1">部品名称</th>
    <th data-width="150" data-column="cinvstd">规格</th>
    <th data-width="150" data-column="cuomname">主计量单位</th>
    <th data-width="150" data-column="">计划数量</th>
    <th data-width="200" data-column="cwhname">仓库名称</th>
    <th data-width="150" data-column="cpositionname">库区名称</th>
    <th data-width="150" data-column="">操作</th>
  </tr>
  </thead>
  <tbody></tbody>
</table>
#end
#define js()
<script type="text/javascript">
  hideParentLayerDialogBtn(0);
  hideParentLayerDialogBtn(1);

  function closeHandler() {
    parent.layer.close(parent.layer.getFrameIndex(window.name));
    window.parent.refreshJBoltTable();
  }

  function DElete(val){

  }

  function removeJBoltTableCheckedTr(ele,confirm,callback){
    var table=getJBoltTable(ele);
    if(isOk(table)){
      var jboltTable=table.jboltTable("inst");
      if(jboltTable){
        var action=getRealJqueryObject(ele);
        if(isOk(action)){
          var success = checkMasterTableId(action);
          if(!success){
            return false;
          }
        }
        jboltTable.me.removeJBoltTableCheckedTr(jboltTable,confirm,callback);

      }
    }
    return true;
  }

</script>
#include("/_view/_admin/common/_formjs.html",formId="SysMaterialsprepare_Form")
#end
