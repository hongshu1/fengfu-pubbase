<!-- 定义JBoltTable使用的数据渲染模板 -->
<script type="text/template" id="CusOrderSum_tpl_#(pageId)">

    {@each datas as data,index}
        <tr data-id="${data.id}">
            <td rowspan="4">${pageNumber,pageSize,index | rownum}</td>
            <td rowspan="4">${data.cinvcode}</td>
            <td rowspan="4">${data.cinvcode1}</td>
            <td rowspan="4">${data.cinvname1}</td>
        </tr>

    <tr>
            <th>客户计划</th>
            {@each data.record1 as record,index}
                {@if data.record1.length == 12}
                <td>${record.iqty1}</td>
                <td>${record.iqty2}</td>
                <td>${record.iqty3}</td>
                <td>${record.iqty4}</td>
                <td>${record.iqty5}</td>
                <td>${record.iqty6}</td>
                <td>${record.iqty7}</td>
                <td>${record.iqty8}</td>
                <td>${record.iqty9}</td>
                <td>${record.iqty10}</td>
                <td>${record.iqty11}</td>
                <td>${record.iqty12}</td>
                <td>${record.iqty13}</td>
                <td>${record.iqty14}</td>
                <td>${record.iqty15}</td>
                <td>${record.iqty16}</td>
                <td>${record.iqty17}</td>
                <td>${record.iqty18}</td>
                <td>${record.iqty19}</td>
                <td>${record.iqty20}</td>
                <td>${record.iqty21}</td>
                <td>${record.iqty22}</td>
                <td>${record.iqty23}</td>
                <td>${record.iqty24}</td>
                <td>${record.iqty25}</td>
                <td>${record.iqty26}</td>
                <td>${record.iqty27}</td>
                <td>${record.iqty28}</td>
                <td>${record.iqty29}</td>
                <td>${record.iqty30}</td>
                <td>${record.iqty31}</td>
                <td>${record.iqtysum}</td>
                {@/if}
            {@/each}
            
            #for(i = 1; i <= 12; i++)
                ${mark=1}
                {@each data.record1 as record,index}
                    {@if record.imonth == #(i)}
                        <td>${record.iqty1}</td>
                        <td>${record.iqty2}</td>
                        <td>${record.iqty3}</td>
                        <td>${record.iqty4}</td>
                        <td>${record.iqty5}</td>
                        <td>${record.iqty6}</td>
                        <td>${record.iqty7}</td>
                        <td>${record.iqty8}</td>
                        <td>${record.iqty9}</td>
                        <td>${record.iqty10}</td>
                        <td>${record.iqty11}</td>
                        <td>${record.iqty12}</td>
                        <td>${record.iqty13}</td>
                        <td>${record.iqty14}</td>
                        <td>${record.iqty15}</td>
                        <td>${record.iqty16}</td>
                        <td>${record.iqty17}</td>
                        <td>${record.iqty18}</td>
                        <td>${record.iqty19}</td>
                        <td>${record.iqty20}</td>
                        <td>${record.iqty21}</td>
                        <td>${record.iqty22}</td>
                        <td>${record.iqty23}</td>
                        <td>${record.iqty24}</td>
                        <td>${record.iqty25}</td>
                        <td>${record.iqty26}</td>
                        <td>${record.iqty27}</td>
                        <td>${record.iqty28}</td>
                        <td>${record.iqty29}</td>
                        <td>${record.iqty30}</td>
                        <td>${record.iqty31}</td>
                        <td>${record.iqtysum}</td>
                    ${mark=2}
                    {@/if}
                {@/each}
                H
                {@if mark == 1}
                    #for(a = 1; a <= 31; a++)
                    <td></td>
                    #end
                    <td></td>
                {@/if}
            #end
        </tr>
    
        <tr>
            <th>客户订单</th>
            {@each data.record2 as record,index}
                {@if data.record2.length == 12}
                    <td>${record.iqty1}</td>
                    <td>${record.iqty2}</td>
                    <td>${record.iqty3}</td>
                    <td>${record.iqty4}</td>
                    <td>${record.iqty5}</td>
                    <td>${record.iqty6}</td>
                    <td>${record.iqty7}</td>
                    <td>${record.iqty8}</td>
                    <td>${record.iqty9}</td>
                    <td>${record.iqty10}</td>
                    <td>${record.iqty11}</td>
                    <td>${record.iqty12}</td>
                    <td>${record.iqty13}</td>
                    <td>${record.iqty14}</td>
                    <td>${record.iqty15}</td>
                    <td>${record.iqty16}</td>
                    <td>${record.iqty17}</td>
                    <td>${record.iqty18}</td>
                    <td>${record.iqty19}</td>
                    <td>${record.iqty20}</td>
                    <td>${record.iqty21}</td>
                    <td>${record.iqty22}</td>
                    <td>${record.iqty23}</td>
                    <td>${record.iqty24}</td>
                    <td>${record.iqty25}</td>
                    <td>${record.iqty26}</td>
                    <td>${record.iqty27}</td>
                    <td>${record.iqty28}</td>
                    <td>${record.iqty29}</td>
                    <td>${record.iqty30}</td>
                    <td>${record.iqty31}</td>
                    <td>${record.iqtysum}</td>
                {@/if}
            {@/each}
            
            #for(i = 1; i <= 12; i++)
                ${mark=1}
                {@each data.record2 as record,index}
                    {@if record.imonth == #(i)}
                    <td>${record.iqty1}</td>
                    <td>${record.iqty2}</td>
                    <td>${record.iqty3}</td>
                    <td>${record.iqty4}</td>
                    <td>${record.iqty5}</td>
                    <td>${record.iqty6}</td>
                    <td>${record.iqty7}</td>
                    <td>${record.iqty8}</td>
                    <td>${record.iqty9}</td>
                    <td>${record.iqty10}</td>
                    <td>${record.iqty11}</td>
                    <td>${record.iqty12}</td>
                    <td>${record.iqty13}</td>
                    <td>${record.iqty14}</td>
                    <td>${record.iqty15}</td>
                    <td>${record.iqty16}</td>
                    <td>${record.iqty17}</td>
                    <td>${record.iqty18}</td>
                    <td>${record.iqty19}</td>
                    <td>${record.iqty20}</td>
                    <td>${record.iqty21}</td>
                    <td>${record.iqty22}</td>
                    <td>${record.iqty23}</td>
                    <td>${record.iqty24}</td>
                    <td>${record.iqty25}</td>
                    <td>${record.iqty26}</td>
                    <td>${record.iqty27}</td>
                    <td>${record.iqty28}</td>
                    <td>${record.iqty29}</td>
                    <td>${record.iqty30}</td>
                    <td>${record.iqty31}</td>
                    <td>${record.iqtysum}</td>
                    ${mark=2}
                    {@/if}
                {@/each}
            
                {@if mark == 1}
                    #for(a = 1; a <= 31; a++)
                    <td></td>
                    #end
                    <td></td>
                {@/if}
            #end
        </tr>
    
        <tr>
            <th>计划使用</th>
            {@each data.record3 as record,index}
                {@if data.record3.length == 12}
                <td>${record.iqty1}</td>
                <td>${record.iqty2}</td>
                <td>${record.iqty3}</td>
                <td>${record.iqty4}</td>
                <td>${record.iqty5}</td>
                <td>${record.iqty6}</td>
                <td>${record.iqty7}</td>
                <td>${record.iqty8}</td>
                <td>${record.iqty9}</td>
                <td>${record.iqty10}</td>
                <td>${record.iqty11}</td>
                <td>${record.iqty12}</td>
                <td>${record.iqty13}</td>
                <td>${record.iqty14}</td>
                <td>${record.iqty15}</td>
                <td>${record.iqty16}</td>
                <td>${record.iqty17}</td>
                <td>${record.iqty18}</td>
                <td>${record.iqty19}</td>
                <td>${record.iqty20}</td>
                <td>${record.iqty21}</td>
                <td>${record.iqty22}</td>
                <td>${record.iqty23}</td>
                <td>${record.iqty24}</td>
                <td>${record.iqty25}</td>
                <td>${record.iqty26}</td>
                <td>${record.iqty27}</td>
                <td>${record.iqty28}</td>
                <td>${record.iqty29}</td>
                <td>${record.iqty30}</td>
                <td>${record.iqty31}</td>
                <td>${record.iqtysum}</td>
                {@/if}
            {@/each}
            
            #for(i = 1; i <= 12; i++)
                ${mark=1}
                {@each data.record3 as record,index}
                    {@if record.imonth == #(i)}
                        <td>${record.iqty1}</td>
                        <td>${record.iqty2}</td>
                        <td>${record.iqty3}</td>
                        <td>${record.iqty4}</td>
                        <td>${record.iqty5}</td>
                        <td>${record.iqty6}</td>
                        <td>${record.iqty7}</td>
                        <td>${record.iqty8}</td>
                        <td>${record.iqty9}</td>
                        <td>${record.iqty10}</td>
                        <td>${record.iqty11}</td>
                        <td>${record.iqty12}</td>
                        <td>${record.iqty13}</td>
                        <td>${record.iqty14}</td>
                        <td>${record.iqty15}</td>
                        <td>${record.iqty16}</td>
                        <td>${record.iqty17}</td>
                        <td>${record.iqty18}</td>
                        <td>${record.iqty19}</td>
                        <td>${record.iqty20}</td>
                        <td>${record.iqty21}</td>
                        <td>${record.iqty22}</td>
                        <td>${record.iqty23}</td>
                        <td>${record.iqty24}</td>
                        <td>${record.iqty25}</td>
                        <td>${record.iqty26}</td>
                        <td>${record.iqty27}</td>
                        <td>${record.iqty28}</td>
                        <td>${record.iqty29}</td>
                        <td>${record.iqty30}</td>
                        <td>${record.iqty31}</td>
                        <td>${record.iqtysum}</td>
                        ${mark=2}
                    {@/if}
                {@/each}
            
                {@if mark == 1}
                    #for(a = 1; a <= 31; a++)
                    <td></td>
                    #end
                    <td></td>
                {@/if}
            #end
        </tr>
    {@/each}
</script>
<div class="jbolt_table_toolbar" id="CusOrderSum_toolbar_#(pageId)">
    <div class="btn-group btn-group-sm" role="group" aria-label="btn-group">
        <div class="btn-group dropdown ">
            <button class="btn btn-outline-primary btn-sm dropdown-toggle" type="button" id="exportContainerButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> 数据导出</button>
            <div class="dropdown-menu" aria-labelledby="exportContainerButton">
                <button class="btn dropdown-item" data-usecheckedids="true" data-downloadbtn data-url="/admin/container/dataExport"><i class="fa fa-download"></i> 导出选中</button>
                <button class="btn dropdown-item" data-downloadbtn data-url="/admin/container/dataExport" data-form="Container_form_#(pageId)"><i class="fa fa-download"></i> 条件导出</button>
            </div>
        </div>
    </div>
</div>

<table class="jbolt_table jbolt_main_table  table-center "
       data-jbolttable
       data-column-resize="true"
       data-ajax="true"
       data-conditions-form="CusOrderSum_form_#(pageId)"
       data-url="admin/cusordersum/datas"
       data-rowtpl="CusOrderSum_tpl_#(pageId)"
       data-copy-to-excel="false"
       data-page="CusOrderSum_page"
       data-toolbar="CusOrderSum_toolbar_#(pageId)"
       data-automerge-cell-cols="1,2,3,4"
>
    <thead>
    <tr>
        <th data-width="60" data-column="index" rowspan="3">序号</th>
        <th data-width="100" data-column="cinvcode" rowspan="3">存货编码</th>
        <th data-width="100" data-column="cinvname1" rowspan="3">客户部番</th>
        <th data-width="100" data-column="iinventoryid" rowspan="3">部品名称</th>
        <th data-width="100" rowspan="3"></th>
        
    </tr>

    
    ### 年月
    <tr>
        #for(d : dateMap)
        <td colspan="#(d.value.size())">#(d.key)</td>
        #end
    </tr>
    
    ### 年月日
    #for(d : dateMap)
        #for(dt : d.value)
            <td>#date(dt, 'yyyy-MM-dd')</td>
       #end
    #end
    
    </thead>
    <tbody>
    </tbody>
</table>
