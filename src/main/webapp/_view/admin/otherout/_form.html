#set(pageId=RandomUtil.random(6))
<div class="jbolt_page">
	<div class="jbolt_page_content">
<form onsubmit="return false;" id="otherOutForm"  action="#(action)" method="post">

	<div class="jbolt_table_toolbar" id="bomcompare_split_toolbar_#(pageId)">
		<div class="col-md-l pt-2" role="group" aria-label="btn-group">
			<button onclick="submitAllTables_#(pageId)(this)" #if(type =="0") style="display: none" #end data-id="1" data-value="save" class="btn btn-success btn-sm"><i class="fa fa-refresh"></i> 保存</button>
			<button onclick="submitAllTables_#(pageId)(this)" #if(type =="0") style="display: none" #end data-id="2" data-value="submit" type="submit" class="btn btn-info btn-sm"><i class="fa fa-window-maximize"></i> 提交审批</button>
			<button onclick="closeHandler()" class="btn btn-info btn-sm"><i class="fa fa-window-maximize"></i> 关闭</button>
		</div>
	</div>
	#if(otherOut.autoid??)
	<input type="hidden" id="otherOutautoid" name="autoid" value="#(otherOut.autoid??)" />
	#end
	<div class="form-group row">
		<label class="col-sm-2 col-form-label">领料单号：</label>
		<div class="col-sm-2 col-form-label">
			<input type="text" class="form-control border-none"  readonly="readonly"  placeholder="" value="#(otherOut.cdocno??)"/>
		</div>
		<label class="col-sm-2 col-form-label">需求日期</label>
		<div class="col-sm-2 col-form-label">
			<input type="text" data-date data-type="date" data-fmt="yyyy-MM-dd" readonly="readonly" autocomplete="off" class="form-control"  data-rule="required" placeholder="请设置需求日期" data-tips="请设置需求日期" maxlength="10" name="billdate" value="#(otherOut.billdate??)"/>
		</div>

	</div>
	<div class="form-group row">
		<label class="col-sm-2 col-form-label">生产部门：</label>
		<div class="col-sm-2 col-form-label">
			<select class="form-control" id="idepid" data-tips="请选择生产部门" data-url="admin/dept/datas"
					data-text-attr="name" data-value-attr="id"
					name="deptcode" data-autoload data-text="=请选择生产部门=" data-value=""
					data-select="#(otherOut.deptcode??)"></select>
		</div>
		<input type="hidden" id="cbadnesssns" name="cbadnesssns" value="#(otherOut.cbadnesssns??)"/>
		<label class="col-sm-2 col-form-label">处置意见：</label>
		<div class="col-sm-5 col-form-label">
			<div class="form-group row"
				 data-hidden-input="cbadnesssns"
				 data-checkbox
				 data-rule="checkbox"
				 data-default=""
				 data-url="admin/dictionary/options?key=opinion"
				 data-value-attr="name"
				 data-text-attr="cbadnesssns"
				 data-inline="true"
				 data-value="#(otherOut.cbadnesssns??)"
				 data-name="cbadnesssns">
			</div>
		</div>
	</div>


	<div class="form-group row">
		<label class="col-sm-2 col-form-label">要求原因分析：</label>
			<div class="col-sm-2 col-form-label"  style="margin-right: 100px">
				<textarea  style="width: 210px; height: 100px; resize: none" placeholder="=请输入要求原因分析=" type="text" maxlength="300" class="form-control border-none" name="cplace" placeholder="" value="#(otherOut.cplace??)">#(otherOut.cplace??)</textarea>
			</div>
	</div>

	<div class="form-group row">
		<div class="col-11" style="left: 17px;">
			<div class="jbolt_page_content">
				#render("_table_split.html")
			</div>
		</div>
	</div>


	<div class="form-group row">
		<label class="col-sm-2 col-form-label">制单人：</label>
		<div class="col-sm-2 col-form-label">
			<input type="text" class="form-control border-none" readonly="readonly" autocomplete="off"   placeholder="" value="#(otherOut.ccreatename??)"/>
		</div>
		<label class="col-sm-2 col-form-label">制单时间：</label>
		<div class="col-sm-2 col-form-label">
			<input type="text" class="form-control border-none" readonly="readonly" autocomplete="off"   placeholder="" value="#date((otherOut.dcreatetime??),'yyyy-MM-dd HH:mm:ss')"/>
		</div>
	</div>
</form>
	</div>
</div>
#define js()
<script>
	hideParentLayerDialogBtn();



	function submitAllTables_#(pageId)(ele){
		debugger;
		var action = getRealJqueryObject(ele);

		var id = action.data("id");
		var value = action.data("value");
		var tables = ["jbolt_table_inventory_split_#(pageId)"];

		jboltTableSubmitMulti(tables, "admin/otherout/submitMulti?param=" + id + "&revokeVal=" + value, function (res) {
			if (res.state == "ok") {
				LayerMsgBox.success(res.msg, 600, function () {
					parent.refreshPjaxContainer();
					parent.layer.close(parent.layer.getFrameIndex(window.name));
				})
			} else {
				LayerMsgBox.error(res.msg);
			}
		});

	}



	function closeHandler(){
		parent.layer.close(parent.layer.getFrameIndex(window.name));
		window.parent.refreshJBoltTable();
	}
</script>
#include("/_view/_admin/common/_formjs.html",formId="otherOutForm")
#end

