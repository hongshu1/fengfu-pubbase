<form onsubmit="return false;" id="PurchaseOrderM_Form" action="#(action)" method="post">
    #if(purchaseOrderM.iAutoId??)
    <input type="hidden" name="purchaseOrderM.iAutoId" value="#(purchaseOrderM.iAutoId??)"/>
    #end
    <div class="row">

        <div class="col">
            <div class="form-group row">
                <label class="col-sm-3 col-form-label">业务类型</label>
                <div class="col-6">
                    <select class="form-control" name=""
                            data-autoload
                            data-url="admin/dictionary/options?key=purchase_business_type"
                            data-select-type="select"
                            data-text="==请选择=="
                            data-value=""
                            data-value-attr="sn">
                    </select>
                </div>

            </div>
            <div class="form-group row">
                <label class="col-sm-3 col-form-label">采购类型</label>
                <div class="col-6">
                    <select class="form-control" name=""
                            data-autoload
                            data-rule="required"
                            data-url="admin/purchaseorderm/findPurchaseType"
                            data-select-type="select"
                            data-text="==请选择=="
                            data-value=""
                            data-text-attr="cptname">
                    </select>
                </div>
            </div>
            <div class="form-group row">
                <label class="col-sm-3 col-form-label">业务员</label>
                <div class="col-6">
                    <input type="hidden" id="ipersonid" name="workregionm.ipersonid" value="#(workregionm.ipersonid??)" />
                    <input type="text" autocomplete="off" value="#(personname??)" class="form-control"
                           placeholder="==请选择人员=="
                           data-jboltinput
                           data-width="600"
                           data-height="450"
                           data-refresh="true"
                           data-hidden-input="ipersonid"
                           data-load-type="ajaxportal"
                           data-url="admin/workregionm/personTable"
                    />
                </div>
            </div>
            <div class="form-group row">
                <label class="col-sm-3 col-form-label">币种</label>
                <div class="col-6">
                    <select class="form-control" name=""
                            data-autoload
                            data-rule="required"
                            data-url="admin/purchaseorderm/findForeignCurrencyAll"
                            data-select-type="select"
                            data-text="==请选择=="
                            data-value=""
                            data-text-attr="cexch_name">
                    </select>
                </div>
            </div>
        </div>
        <div class="col">
            <div class="form-group row">
                <label class="col-sm-3 col-form-label">订单日期</label>
                <div class="col-6">
                    <input type="text" data-date data-type="date" data-with-clearbtn="true" data-fmt="yyyy-MM-dd"
                           readonly="readonly" data-rule="required" data-notnull="true" data-tips="请输入订单日期"
                           data-with-clearbtn="true" autocomplete="off" class="form-control"
                           placeholder="请输入订单日期" maxlength="20" name="purchaseOrderM.dOrderDate"
                           value="#datetime(purchaseOrderM.dOrderDate??,'yyyy-MM-dd')"/>
                </div>
            </div>
            <div class="form-group row">
                <label class="col-sm-3 col-form-label">供应商名称</label>
                <div class="col-6">
                    <select class="form-control" name=""
                            data-autoload
                            data-url="admin/dictionary/options?key="
                            data-select-type="select"
                            data-text="佛山市丰富汽配有限公司"
                            data-value=""
                            data-value-attr="sn">
                    </select>
                </div>
            </div>
            <div class="form-group row">
                <label class="col-sm-3 col-form-label">税率</label>
                <div class="col-6">
                    <input type="text" data-with-clearbtn="true" autocomplete="off" class="form-control"
                           placeholder="请输入税率" maxlength="40" name="purchaseOrderM.iTaxRate"
                           value="#(purchaseOrderM.iTaxRate??)"/>
                </div>
            </div>
            <div class="form-group row">
                <label class="col-sm-3 col-form-label">汇率</label>
                <div class="col-6">
                    <input type="text" data-with-clearbtn="true" autocomplete="off" class="form-control" data-rule="required"
                           placeholder="请输入汇率" maxlength="40" name="purchaseOrderM.iExchangeRate"
                           value="#(purchaseOrderM.iExchangeRate??)"/>
                </div>
            </div>
        </div>
        <div class="col">
            <div class="form-group row">
                <label class="col-sm-3 col-form-label">订单编号</label>
                <div class="col-6">
                    <input type="text" data-rule="required" data-notnull="true" data-tips="请输入订单编号"
                           data-with-clearbtn="true" autocomplete="off" class="form-control"
                           placeholder="请输入订单编号" maxlength="40" name="purchaseOrderM.cOrderNo"
                           value="#(purchaseOrderM.cOrderNo??)"/>
                </div>
            </div>
            <div class="form-group row">
                <label class="col-sm-3 col-form-label">部门</label>
                <div class="col-6">
                    <select class="form-control"
                            data-autoload
                            name="workregionm.idepid"
                            data-tips="请选择部门"
                            data-rule="required"
                            data-url="admin/department/getTreeTableDatas"
                            data-text="=请选择部门="
                            data-value=""
                            data-value-attr="iautoid"
                            data-text-attr="cdepname"
                            data-select="#(workregionm.idepid??)">
                    </select>
                </div>
            </div>
            <div class="form-group row">
                <label class="col-sm-3 col-form-label">应付类型</label>
                <div class="col-6">
                    <select class="form-control" name="iPayableType "
                            data-autoload
                            data-rule="required"
                            data-url="admin/dictionary/options?key=purchase_coping_type"
                            data-select-type="select"
                            data-text="==请选择=="
                            data-value=""
                            data-value-attr="sn">
                    </select>
                </div>
            </div>
            <div class="form-group row">
                <label class="col-sm-3 col-form-label">备注</label>
                <div class="col-6">
                    <input type="text" data-notnull="true" data-tips="" data-with-clearbtn="true"
                           autocomplete="off" class="form-control" placeholder="" maxlength="40" name="" value=""/>
                </div>
            </div>
        </div>
    </div>
    </div>
</form>
<!-- 定义JBoltTable使用的数据渲染模板 -->
<textarea class="jb_tpl_box" id="PurchaseOrderD_tpl_#(pageId)">
{@each datas as data,index}
<tr data-id="${data.id}">
<td>${pageNumber,pageSize,index | rownum}</td>
    <td>
	    <a class="jbolt_table_delbtn" href="admin/purchaseorderd/${data.isDeleted?'realDelete':'delete'}/${data.id}" data-handler="refreshJBoltTable" ><i class="fa fa-remove c-danger"></i></a>
    </td>
<td>${data.iInventoryId}</td>
    <td>${data.cInvCode1}</td>
    <td>${data.cInvName1}</td>
    <td>${data.cInvStd}</td>
    <td>${data.iPurchaseUomId}</td>
    <td>${data.iPkgQty}</td>
<td><img data-switchbtn data-confirm="确定切换是否赠品： 0. 否 1. 是？" data-value="${data.isPresent}"  data-handler="refreshJBoltTable"  data-url="admin/purchaseorderd/toggleIsPresent/${data.id}"/></td>
<td>${data.iVendorAddrId}</td>
<td>${data.cMemo}</td>
<td><img data-switchbtn data-confirm="确定切换删除状态：0. 未删除 1. 已删除？" data-value="${data.isDeleted}"  data-handler="refreshJBoltTable"  data-url="admin/purchaseorderd/toggleIsDeleted/${data.id}"/></td>
</tr>
{@/each}
</textarea>
<div class="jbolt_table_toolbar" id="PurchaseOrderD_toolbar_#(pageId)">
    <div class="btn-group btn-group-sm" role="group" aria-label="btn-group">
        <button data-ajaxbtn data-handler="refreshJBoltTable" data-check-handler="jboltTableGetCheckedIds"
                id="toolbar_deleteBtn_#(pageId)" data-url="admin/purchaseorderd/deleteByIds?ids="
                data-confirm="确定删除选中数据？" class="btn btn-outline-danger"><i class="fa fa-trash"></i> 删除
        </button>
    </div>

</div>
<table class="jbolt_table jbolt_main_table  table-center "
       data-jbolttable
       data-width="fill"
       data-height="fill"
       data-ajax="true"
       data-conditions-form="PurchaseOrderD_form_#(pageId)"
       data-url="admin/purchaseorderd/datas"
       data-rowtpl="PurchaseOrderD_tpl_#(pageId)"
       data-copy-to-excel="false"
       data-page="PurchaseOrderD_page"
       data-toolbar="PurchaseOrderD_toolbar_#(pageId)"
       data-column-prepend="1:checkbox:true:false:false"
>
    <thead>
    <tr>
        <th data-width="60" data-column="index">序号</th>
        <th data-width="80">操作</th>
        <th data-width="100" data-column="iInventoryId">存货编码</th>
        <th data-width="150" data-column="cInvCode1">客户部番</th>
        <th data-width="150" data-column="cInvName1">部品名称</th>
        <th data-width="150" data-column="cInvStd">规格</th>
        <th data-width="150" data-column="iPurchaseUomId">采购单位</th>
        <th data-width="150" data-column="iPkgQty">包装数量</th>
        <th data-width="100" data-column="isPresent">是否赠品</th>
        <th data-width="100" data-column="cMemo">备注</th>
        <th data-width="100" data-column="iVendorAddrId">供应商地址</th>
    </tr>
    </thead>
    <tbody></tbody>
</table>
#define js()
<script>
</script>
#include("/_view/_admin/common/_formjs.html",formId="PurchaseOrderM_Form")
#end

