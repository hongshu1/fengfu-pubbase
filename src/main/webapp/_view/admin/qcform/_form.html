#set(pageId=RandomUtil.random(6))
<form onsubmit="return false;" id="QcFormForm" action="#(action)" method="post">

    #if(qcForm.iAutoId??)
    <input type="hidden" id="qcFormiAutoId_#(pageId)" name="qcForm.iAutoId" value="#(qcForm.iAutoId??)"/>
    #end

    <div class="row">
        <div class="col">
            <div class="form-group row">
                <label class="col-sm-1 col-form-label">检验表格名称</label>
                <div class="col-10">
                    <input type="text" data-rule="required" data-notnull="true" data-tips="请输入检验表格名称" data-with-clearbtn="true" autocomplete="off" class="form-control" placeholder="请输入检验表格名称" maxlength="40" name="qcForm.cQcFormName" value="#(qcForm.cQcFormName??)"/>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col">
            <div class="form-group row">
                <label class="col-sm-1 col-form-label">表格配置</label>
                <div class="col-10">

                    <!-- 检验表格项目表的的form数据定义-->
                    <div class="card">

                        <div class="card-header py-2">
                            <div class="row">
                                <div class="col pt-2"><label>表格项目</label></div>
                                <div class="col-md-auto">
                                    <form id="qcformitemTypeForm_#(pageId)" class="form-inline" onsubmit="return false;">

                                    </form>
                                </div>
                            </div>
                        </div>

                        <div class="card-body overflow-auto" style="height: calc(100vh - #(jboltLayerTop+500)px);">
                            #include("_table1.html")
                        </div>

                    </div>

                    <!-- 检验表格参数表的的form数据定义-->
                    <div class="card">

                        <div class="card-header py-2">
                            <div class="row">
                                <div class="col pt-2"><label>表格内容</label></div>
                                <div class="col-md-auto">
                                    <form style="display:none;" id="dictionaryForm_#(pageId)" class="form-inline" onsubmit="return false;">
                                        <input type="text" name="typeid" id="dicTypeId_#(pageId)" value="#(typeid??)"/>

                                    </form>
                                </div>
                                <div class="col pt-2">
                                </div>
                            </div>
                        </div>

                        <div class="card-body overflow-auto" style="height: calc(100vh - #(jboltLayerTop+500)px);">
                            #include("_table2.html")
                        </div>

                    </div>

                    <!-- 检验表格项目表的的form数据定义-->
                    <div class="card">
                        <div class="card-header py-2">
                            <div class="row">
                                <div class="col pt-2"><label>表格录入方式</label></div>
                                <div class="col-md-auto">
                                    <form id="qcformtableparamForm_#(pageId)" class="form-inline" onsubmit="return false;">
                                        <!-- 工具条 toolbar -->
                                        <input type="text" name="qcformparamId" id="qcformparamId" value="#(qcformparamId??)"/>

                                    </form>
                                </div>
                            </div>
                        </div>

                        <div class="card-body overflow-auto" style="height: calc(100vh - #(jboltLayerTop+500)px);">
                            ###include("_table3.html")
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>



    <div class="row">
        <div class="col">
            <div class="form-group row"
                        data-radio
                        data-name="qcForm.isEnabled"
                        data-value-attr="sn"
                        data-default="options_first"
                        data-url="admin/dictionary/options?key=options_enable"
                        data-label="是否启用"
                        data-width="col-sm-1,col-10"
                        data-value="#(qcForm.isEnabled??)"
                        data-rule="radio"
                        data-notnull="true"
                        data-tips="请选择是否启用"
                        data-inline="true"
            ></div>
        </div>
    </div>


    <div class="row">
        <div class="col">
            <div class="form-group row">
                <label class="col-sm-1 col-form-label">备注</label>
                <div class="col-10">
                    <textarea  data-with-clearbtn="true" autocomplete="off"  class="form-control"  placeholder="请输入备注" maxlength="200" name="padWorkRegion.cMemo">#(padWorkRegion.cMemo??)</textarea>
                </div>
            </div>
        </div>
    </div>
</form>
#define js()
#include("_table1_js.html")
#include("_table2_js.html")
#include("_table3_js.html")
<script>

    console.log('#(jboltLayerTop)')

    var $dicOptBtns = $("#dicOptBtns_#(pageId)");

    // <!--	隐藏一个不需要的按钮-->
    hideParentLayerDialogBtn(0);

    //检验表格项目保存
    function QcFormItemsubmit() {
        jboltTableSubmit('#jbolt_table_QcFormItem_split');
    }

    //检验表格参数保存
    function QcFormParamsubmit() {
        jboltTableSubmit('#jbolt_table_qcformparam_split');
    }

    /**
     * 关闭弹窗
     */
    function dialogClose() {
        parent.layer.close(parent.layer.getFrameIndex(window.name));
    }

    // 绑定检验表格参数和检验表格项目关联
    function clearDicTable_#(pageId)() {
        $("#selectDicTypeName").text("未选");
        $("#dicTypeId_#(pageId)").val("");
        $("#dicKeywords_#(pageId)").val("");
        $("#dictionaryForm_#(pageId)").hide();
        $dicOptBtns.hide();
        refreshJBoltTable("jbolt_table_qcformparam_split");
    }

    function clearDicTables_#(pageId)() {
        $("#qcformparamId").val("");
        $("#dicKeywords_#(pageId)").val("");
        refreshJBoltTable("jbolt_table_qcformparam_split");
    }

    function readqcformparamss(table, tr, typeid, jsonData) {
        console.log("====1111" + jsonData)
        $("#qcformparamId").val(jsonData.iautoid);
        $("#qcformtableparamForm_#(pageId)").show();
        refreshJBoltTable("jbolt_table_qcformtableparam_split");
    }

    function readqcformparams(table, tr, typeid, jsonData) {
        console.log("====" + jsonData)
        $dicOptBtns.hide();
        $("#selectDicTypeName").text(jsonData.cqcitemname);
        $("#dicTypeId_#(pageId)").val(jsonData.iautoid);
        $("#dicKeywords_#(pageId)").val("");
        $("#dictionaryForm_#(pageId)").show();
        $dicOptBtns.show();
        // $("#mian").text(jsonData.cqcitemname);
        // if(jsonData.modeLevel==2){
        //     $("#expandCollapseOpt_#(pageId)").show();
        // }else{
        //     $("#expandCollapseOpt_#(pageId)").hide();
        // }
        refreshJBoltTable("jbolt_table_qcformparam_split");
    }

    // 检验表格项目新增
    function addBomcompareTr(ele) {
        const dataList = jboltTableGetAllDatas('#jbolt_table_QcFormItem_split', ['iqcitemid']);
        let FormItemCodes = '';
        if (isOk(dataList)) {
            dataList.forEach((value, index) => {
                FormItemCodes = FormItemCodes.concat(",").concat(value.iqcitemid);
            })
        }
        if (isOk(FormItemCodes)) {
            FormItemCodes = FormItemCodes.concat(",");
        }
        const url = "/admin/qcform/qcformitem/qcFormItemDatas?type=1&FormItemCodes=" + FormItemCodes;
        $(ele).data("url", url);
        DialogUtil.openBy(ele);
    }

    // 检验表格参数新增
    function addparam(ele) {
        const dataList = jboltTableGetAllDatas('#jbolt_table_qcformparam_split', ['iqcparamid']);
        let FormItemCodes = '';
        if (isOk(dataList)) {
            dataList.forEach((value, index) => {
                FormItemCodes = FormItemCodes.concat(",").concat(value.iqcparamid);
            })
        }
        if (isOk(FormItemCodes)) {
            FormItemCodes = FormItemCodes.concat(",");
        }
        const url = "/admin/qcform/qcformparam/qcformparamDatas?type=2&FormItemCodes=" + FormItemCodes;
        $(ele).data("url", url);
        DialogUtil.openBy(ele);
    }

</script>
#end
