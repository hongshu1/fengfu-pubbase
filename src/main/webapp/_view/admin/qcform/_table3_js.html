<script>
    // 检验表格录入方式提交
    function getqcformtableparamTableOptions_split() {
        var editableTableOptions = {
            // trigger: "click",
            submit: {
                withForm: ["QcFormForm"],
                type: "all",
                url: "/admin/qcform/QcFormTableParamJBoltTable",
                success: function (res, table, td) {
                    if (res.state === 'ok') {
                        LayerMsgBox.success(res.msg, 1000, function () {
                            parent.LayerMsgBox.closeAll();
                            parent.refreshPjaxContainer();
                        });
                    } else {
                        LayerMsgBox.alert(res.msg, 2);
                    }
                }
            },
            cols: {
                iType: {
                    submitAttr: "itype",
                    url: "admin/dictionary/options?key=rcvDocQcFormd_itype",
                    valueAttr: "sn",
                    textAttr: "name",
                    placeholder: "=请选择=",
                    required: true,
                    handler: function (table, td, text, value, trJsonData) {
                        console.log(value);
                        // 不为CPK数值，最大最小值都不能输入
                        if (value == '1'){
                            jboltTableUpdateOtherColumns(table, td.parent(), trJsonData, [
                                {column: 'coptions', use: 'coptions', editable: false}
                            ]);
                        } else if (value != '1') {
                            jboltTableUpdateOtherColumns(table, td.parent(), trJsonData, [
                                {column: 'istdval', use: 'istdval', editable: false},
                                {column: 'imaxval', use: 'imaxval', editable: false},
                                {column: 'iminval', use: 'iminval', editable: false},
                            ]);
                            // 取消输入框可编辑
                            if (value === '2' || value === '3' || value === '7' || value === '8'){
                                jboltTableUpdateOtherColumns(table, td.parent(), trJsonData, [
                                    {column: 'coptions', use: 'coptions', editable: false}
                                ]);
                            }
                        }
                    }
                },
                iStdVal: {
                    submitAttr: "istdval",
                    type: "input_number",
                    placeholder: "=标准值="
                },
                iMaxVal: {
                    submitAttr: "imaxval",
                    type: "input_number",
                    placeholder: "=最大设定值="
                },
                iMinVal: {
                    submitAttr: "iminval",
                    type: "input_number",
                    placeholder: "=最小设定值="
                },
                cOptions: {
                    submitAttr: "coptions",
                    type: "input"
                }
            }
        };
        return editableTableOptions;
    }
</script>
