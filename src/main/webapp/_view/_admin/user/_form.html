#set(deptEnable=JBoltGlobalConfigCache.deptEnable())
#set(postEnable=JBoltGlobalConfigCache.postEnable())
#set(userExtendEnable=JBoltGlobalConfigCache.userExtendEnable())
<form onsubmit="return false;" id="userForm" action="#(action)" method="post">
	<input type="hidden" name="user.id" value="#(user.id??)" />

	<input type="hidden" name="user.avatar" id="userAvatarInput" value="#(user.avatar??)" class="form-control"/>
	<div class="row">
		<div class="col-12 col-sm-12 col-lg-#(userExtendEnable?4:6)">
		<fieldset class="form-page-fieldset">
			<legend>基础信息</legend>
			<div class="form-group row">
				<label class="col-sm-2 col-form-label">姓名</label>
				<div class="col">
					<input type="text" autocomplete="off"  class="form-control" data-rule="required" placeholder="请输入用户姓名" data-tips="请输入用户姓名" maxlength="20" name="user.name" value="#(user.name??)">
				</div>
			</div>
			<div class="form-group row">
				<label class="col-sm-2 col-form-label">编号</label>
				<div class="col">
					<input type="text" autocomplete="off"  class="form-control"  placeholder="请输入用户编号或工号" data-tips="请输入用户编号或工号" maxlength="20" name="user.sn" value="#(user.sn??)">
				</div>
			</div>
			<div class="form-group row">
				<label class="col-sm-2 col-form-label">性别</label>
				<div class="col">
				<select class="form-control" data-rule="required"  data-tips="请选择性别" data-url="admin/user/sexOptions"  name="user.sex" data-autoload data-text="=请选择=" data-value="" data-select="#(user.sex??)"></select>
				</div>
			</div>
			<div class="form-group row">
				<label class="col-sm-2 col-form-label">年龄</label>
				<div class="col">
					<input type="text" autocomplete="off"  class="form-control" data-rule="pzint" data-notnull="false"  placeholder="请输入用户年龄" data-tips="请输入用户年龄 正整数" maxlength="3" name="user.age" value="#(user.age??)">
				</div>
			</div>
			<div class="form-group row">
				<label class="col-sm-2 col-form-label">手机号</label>
				<div class="col">
					<input type="text" autocomplete="off"  class="form-control"  placeholder="请输入用户手机号"  maxlength="20" name="user.phone" value="#(user.phone??)">
				</div>
			</div>
			<div class="form-group row">
				<label class="col-sm-2 col-form-label">E-Mail</label>
				<div class="col">
					<input type="text" autocomplete="off"  class="form-control" data-rule="email" data-notnull="false"  placeholder="请输入用户E-Mail"  maxlength="100" name="user.email" value="#(user.email??)">
				</div>
			</div>
		</fieldset>
		<fieldset class="form-page-fieldset">
			<legend>登录账号、密码、角色配置</legend>
				<div class="form-group row">
					<label class="col-sm-2 col-form-label">用户名</label>
					<div class="col">
						<input type="text" autocomplete="off"  class="form-control" data-rule="required" placeholder="请输入登录用户名" data-tips="请输入登录用户名" maxlength="20" name="user.username" value="#(user.username??)">
					</div>
				</div>
			
			 
			#if(!(user??))
				<div class="form-group row">
					<label class="col-sm-2 col-form-label">密码</label>
					<div class="col">
						<input type="password"  autocomplete="new-password"  class="form-control" data-rule="required" placeholder="请输入登录密码" data-tips="请输入登录密码" maxlength="20" name="user.password" value="#(user.password??)">
					</div>
				</div>
			#end
			
			 
				
				<div class="form-group row">
								<label class="col-sm-2 col-form-label">角色</label>
								<div class="col">
									<select class="form-control"
										data-autoload
										data-rule="select"
										data-select-type="select2"
										multiple="multiple"
										data-tips="请选择用户角色" 
										data-url="admin/role/options"  
										data-text="=请选择角色[可多选]=" 
										data-value="" 
										data-setvalueto="userRoles"
										data-select="#(user.roles??)">
									</select>
								</div>
				</div>
				<input type="hidden" id="userRoles" name="user.roles" value="#(user.roles??)"/>
				
			</fieldset>
		
		</div>
		<div class="col-12  col-sm-12  col-lg-#(userExtendEnable?4:6)">
			#if(deptEnable||postEnable)
		<fieldset class="form-page-fieldset">
			<legend>#if(deptEnable)部门#end #if(postEnable)岗位#end</legend>
			#if(deptEnable)
			<div class="form-group row">
				<label class="col-sm-2 col-form-label">部门</label>
				<div class="col">
					<select class="form-control" name="user.deptId"
						data-autoload
						data-select-type="select2"
						data-tips="请选择部门" 
						data-url="admin/dept/enableOptions"  
						data-text="=请选择部门=" 
						data-value="" 
						data-select="#(user.deptId??)">
					</select>
				</div>
			</div>
			#end
			#if(postEnable)
			<div class="form-group row">
				<label class="col-sm-2 col-form-label">岗位</label>
				<div class="col">
					<select class="form-control"
						data-autoload
						multiple="multiple"
						data-select-type="select2"
						data-tips="请选择岗位" 
						data-url="admin/post/enableOptions"  
						data-text="=请选择岗位[可多选]=" 
						data-value=""
						data-setvalueto="userPosts"
						data-select="#(user.posts??)">
					</select>
				</div>
			</div>
			<input type="hidden" id="userPosts" name="user.posts" value="#(user.posts??)"/>
		#end
		</fieldset>
		#end
			
			<fieldset class="form-page-fieldset">
			<legend>上传头像</legend>
			<div class="form-group text-center">
					<div class="j_img_uploder" 
					data-url="admin/user/uploadAvatar" 
					data-value="#realImage(user.avatar??)"  
					data-handler="uploadFile"  
					data-hiddeninput="userAvatarInput"  
					data-area="200,200" 
					data-maxsize="2000"></div>
			</div>
			</fieldset>
		</div>
		#if(userExtendEnable)
		<div class="col-12  col-sm-12  col-lg-4">
			<fieldset class="form-page-fieldset">
				<legend>扩展信息</legend>
				#ajaxPortal("admin/user/extendForm/"+(user.id?? 0),"userExtendFormPortal",true)
			</fieldset>
		</div>
		#end
	</div>
	
	</form>
 
	


#define js()
<script>

$(function(){
})
</script>
#include("/_view/_admin/common/_formjs.html",formId="userForm")
#end
